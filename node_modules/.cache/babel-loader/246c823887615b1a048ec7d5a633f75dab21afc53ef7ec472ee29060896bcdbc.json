{"ast":null,"code":"import _objectSpread from\"/home/miraculix/coffee-tracker/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{Plus,Coffee,Star,Search,Trash2,Edit3,Calendar,Percent,ExternalLink,BarChart3,Moon,Sun,Download,Upload,FileText,RefreshCw,RotateCcw,Copy,ChevronDown,ChevronUp}from'lucide-react';import{LineChart,Line,BarChart,Bar,RadarChart,PolarGrid,PolarAngleAxis,PolarRadiusAxis,Radar,XAxis,YAxis,CartesianGrid,Tooltip,Legend,ResponsiveContainer,PieChart,Pie,Cell}from'recharts';import jsPDF from'jspdf';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CoffeeTracker=()=>{const[coffees,setCoffees]=useState([]);const[showAddForm,setShowAddForm]=useState(false);const[editingCoffee,setEditingCoffee]=useState(null);const[searchTerm,setSearchTerm]=useState('');const[filterFavorites,setFilterFavorites]=useState(false);const[sortBy,setSortBy]=useState('date');const[darkMode,setDarkMode]=useState(true);const[showAnalytics,setShowAnalytics]=useState(false);const[selectedCoffeeForRadar,setSelectedCoffeeForRadar]=useState(null);const[collapsedRoasters,setCollapsedRoasters]=useState(()=>{const saved=localStorage.getItem('collapsedRoasters');return saved?JSON.parse(saved):{};});const fileInputRef=useRef(null);// Brewing methods\nconst brewingMethods=[{id:'espresso',name:'Espresso/Portafilter (SiebtrÃ¤ger)',icon:'â˜•'},{id:'v60',name:'V60 Pour Over',icon:'ðŸ”»'},{id:'chemex',name:'Chemex',icon:'â³'},{id:'frenchpress',name:'French Press',icon:'ðŸ«–'},{id:'aeropress',name:'AeroPress',icon:'ðŸ’‰'},{id:'moka',name:'Moka Pot',icon:'ðŸ«—'},{id:'dripper',name:'Dripper',icon:'â˜•'},{id:'filter',name:'Filter Coffee',icon:'ðŸ“„'}];// Default sample data\nconst defaultCoffees=[{\"id\":17,\"roaster\":\"DieRÃ¶ster - Suchan Bologna\",\"description\":\"Leicht fruchtig, schokoladig\",\"favorite\":true,\"grinded\":false,\"grindingTime\":\"\",\"grindingDegree\":\"12\",\"percentArabica\":90,\"percentRobusta\":10,\"cuppingTime\":new Date(\"2023-06-10 14:32:49\"),\"cremaRating\":3,\"tasteRating\":3,\"tasteNotes\":\"light fruity, chocolate, balanced, bitter chocolate notes\",\"url\":\"https://www.dieroester.at/roester/suchan/bologna\",\"comment\":\"90/10 Mischung aus Brasilien, Indien, Ã„thiopien, Nicaragua\",\"origin\":\"BR,IN,ET,NI\",\"roastLevel\":\"medium-dark\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"43.20\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\",\"preparationNotes\":\"Pure espresso\",\"recommendedMethod\":\"espresso\"},{\"id\":11,\"roaster\":\"DieRÃ¶ster - Suchan Palermo\",\"description\":\"schokoladig nussig holzig\",\"favorite\":true,\"grinded\":false,\"grindingTime\":\"\",\"grindingDegree\":\"15\",\"percentArabica\":100,\"percentRobusta\":0,\"cuppingTime\":new Date(\"2023-03-15 21:48:47\"),\"cremaRating\":5,\"tasteRating\":5,\"tasteNotes\":\"nutty, woody, chocolate, very low acidity\",\"url\":\"https://www.dieroester.at/roester/suchan/palermo\",\"comment\":\"Parade-Espresso fÃ¼r Leute, die viel Aroma und wenig SÃ¤ure mÃ¶chten\",\"origin\":\"IT\",\"roastLevel\":\"dark\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"45.60\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\",\"preparationNotes\":\"Pure espresso\",\"recommendedMethod\":\"espresso\"},{\"id\":20,\"roaster\":\"Lavazza\",\"description\":\"Barista intenso\",\"favorite\":true,\"grinded\":false,\"grindingTime\":\"\",\"grindingDegree\":\"10\",\"percentArabica\":50,\"percentRobusta\":50,\"cuppingTime\":new Date(\"2024-01-10 19:03:35\"),\"cremaRating\":5,\"tasteRating\":5,\"tasteNotes\":\"cocoa, wood, hazelnut, full body, intense aftertaste\",\"url\":\"https://www.lavazza.com/en/coffee-beans/espresso-barista-intenso\",\"comment\":\"Intensity 9/10, perfect for espresso and moka\",\"origin\":\"BR,AS\",\"roastLevel\":\"dark\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"19.99\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\",\"preparationNotes\":\"Pure espresso\",\"recommendedMethod\":\"espresso\"},{\"id\":19,\"roaster\":\"Lavazza\",\"description\":\"Espresso Italiano Cremoso\",\"favorite\":true,\"grinded\":false,\"grindingTime\":\"\",\"grindingDegree\":\"9\",\"percentArabica\":30,\"percentRobusta\":70,\"cuppingTime\":new Date(\"2023-10-15 12:29:58\"),\"cremaRating\":5,\"tasteRating\":5,\"tasteNotes\":\"chocolate, spices, cocoa, long-lasting crema\",\"url\":\"https://www.lavazza.com/en/coffee/coffee-beans/espresso-cremoso-1-kg.html\",\"comment\":\"RÃ¶stgrad mittel, Intensity 8/10, from Latin America and Southeast Asia\",\"origin\":\"LA,AS\",\"roastLevel\":\"medium\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"16.49\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\",\"preparationNotes\":\"Pure espresso\",\"recommendedMethod\":\"espresso\"},{\"id\":21,\"roaster\":\"Lavazza\",\"description\":\"Gran Cremoso\",\"favorite\":true,\"grinded\":false,\"grindingTime\":\"\",\"grindingDegree\":\"19\",\"percentArabica\":70,\"percentRobusta\":30,\"cuppingTime\":new Date(\"2024-03-23 07:41:56\"),\"cremaRating\":4,\"tasteRating\":4,\"tasteNotes\":\"chocolate, dried fruits, balanced, well-rounded\",\"url\":\"https://www.lavazza.com\",\"comment\":\"South America and Southeast Asia blend\",\"origin\":\"SA,AS\",\"roastLevel\":\"medium\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"26.99\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\",\"preparationNotes\":\"Pure espresso\",\"recommendedMethod\":\"espresso\"},{\"id\":9,\"roaster\":\"220 Grad\",\"description\":\"Guatemala La Labor\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"\",\"grindingDegree\":\"15\",\"percentArabica\":100,\"percentRobusta\":0,\"cuppingTime\":new Date(\"2020-07-11 18:02:56\"),\"cremaRating\":4,\"tasteRating\":4,\"tasteNotes\":\"almonds, pecans, dried fruits, milk chocolate, lively acidity\",\"url\":\"https://www.220grad.com/produkt/guatemala-la-labor-espresso-roestung/\",\"comment\":\"Red Bourbon variety, Finca La Labor, 1520m altitude\",\"origin\":\"GT\",\"roastLevel\":\"medium\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"v60\",\"price\":\"38.30\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\",\"preparationNotes\":\"Pure espresso\"},{\"id\":18,\"roaster\":\"220 Grad\",\"description\":\"Guatemala Single Region Robusta\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"\",\"grindingDegree\":\"5\",\"percentArabica\":0,\"percentRobusta\":100,\"cuppingTime\":new Date(\"2023-08-18 08:14:24\"),\"cremaRating\":5,\"tasteRating\":3,\"tasteNotes\":\"creamy, sweet grain, hazelnut, walnut, dark caramel, cinnamon, lemongrass\",\"url\":\"https://www.220grad.com/produkt/guatemala-robusta/\",\"comment\":\"Finca Santa Isabel, biodynamic cultivation, 1400m altitude\",\"origin\":\"GT\",\"roastLevel\":\"medium-dark\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"34.20\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\"},{\"id\":8,\"roaster\":\"220 Grad\",\"description\":\"Selektion Eins\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"2,8\",\"grindingDegree\":\"3\",\"percentArabica\":100,\"percentRobusta\":0,\"cuppingTime\":new Date(\"2020-05-12 13:08:43\"),\"cremaRating\":3,\"tasteRating\":3,\"tasteNotes\":\"\",\"url\":\"https://www.220grad.com\",\"comment\":\"\",\"origin\":\"\",\"roastLevel\":\"medium\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"39.20\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\"},{\"id\":12,\"roaster\":\"Bohnendealer - Amicizia Espresso\",\"description\":\"schokoladig nussig krÃ¤ftig samtig\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"\",\"grindingDegree\":\"18\",\"percentArabica\":26,\"percentRobusta\":74,\"cuppingTime\":new Date(\"2023-04-07 20:07:06\"),\"cremaRating\":3,\"tasteRating\":3,\"tasteNotes\":\"dark chocolate, spicy, full-bodied, velvety, no acidity\",\"url\":\"https://www.bohnendealer.coffee/collections/coffee/products/amicizia-espresso\",\"comment\":\"Neapolitan dark roast from 7 origins: India, Uganda, Costa Rica, Colombia, El Salvador, Brazil, Ethiopia\",\"origin\":\"IN,UG,CR,CO,SV,BR,ET\",\"roastLevel\":\"dark\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"31.90\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\"},{\"id\":14,\"roaster\":\"Bohnendealer - Malabar\",\"description\":\"schokoladig nussig mild samtig\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"\",\"grindingDegree\":\"11\",\"percentArabica\":100,\"percentRobusta\":0,\"cuppingTime\":new Date(\"2023-05-07 09:02:11\"),\"cremaRating\":1,\"tasteRating\":1,\"tasteNotes\":\"chocolate, nutty, sweet, monsoon processed\",\"url\":\"https://www.bohnendealer.coffee/products/monsooned-malabar-espresso\",\"comment\":\"Monsooned process creates unique flavor\",\"origin\":\"IN\",\"roastLevel\":\"medium\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"33.80\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\"},{\"id\":13,\"roaster\":\"Bohnendealer - Paris\",\"description\":\"dunkel wÃ¼rzig rassig krÃ¤frig\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"\",\"grindingDegree\":\"11\",\"percentArabica\":60,\"percentRobusta\":40,\"cuppingTime\":new Date(\"2023-04-07 20:17:36\"),\"cremaRating\":2.5,\"tasteRating\":2.5,\"tasteNotes\":\"dark, spicy, chocolate notes, full body\",\"url\":\"https://www.bohnendealer.coffee/products/paris-espresso-premium-slow-roast-kaffee\",\"comment\":\"French roast style, from Ecuador, Ethiopia and India\",\"origin\":\"EC,ET,IN\",\"roastLevel\":\"dark\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"31.90\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\"},{\"id\":15,\"roaster\":\"Bohnendealer - Siena\",\"description\":\"dunkel schokoladig krÃ¤ftig\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"\",\"grindingDegree\":\"13\",\"percentArabica\":100,\"percentRobusta\":0,\"cuppingTime\":new Date(\"2023-05-14 10:41:28\"),\"cremaRating\":3,\"tasteRating\":3,\"tasteNotes\":\"dark chocolate, Italian style, traditional\",\"url\":\"https://www.bohnendealer.coffee/products/siena-espresso\",\"comment\":\"Hommage to Italian coffee culture\",\"origin\":\"IT\",\"roastLevel\":\"dark\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"31.90\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\"},{\"id\":3,\"roaster\":\"Dallmayr\",\"description\":\"Caffe Crema Perfetto\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"\",\"grindingDegree\":\"7\",\"percentArabica\":70,\"percentRobusta\":30,\"cuppingTime\":new Date(\"2019-05-29 14:30:01\"),\"cremaRating\":0,\"tasteRating\":0,\"comment\":\"\",\"origin\":\"\",\"roastLevel\":\"medium\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"18.48\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\"},{\"id\":2,\"roaster\":\"Dallmayr\",\"description\":\"d'Oro Intensa\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"3\",\"grindingDegree\":\"3\",\"percentArabica\":100,\"percentRobusta\":0,\"cuppingTime\":new Date(\"2019-04-10 14:04:36\"),\"cremaRating\":5,\"tasteRating\":4,\"comment\":\"sehr stark\",\"origin\":\"\",\"roastLevel\":\"dark\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"15.49\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\"},{\"id\":4,\"roaster\":\"Dallmayr\",\"description\":\"Espresso intenso\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"\",\"grindingDegree\":\"7\",\"percentArabica\":100,\"percentRobusta\":0,\"cuppingTime\":new Date(\"2019-05-29 14:32:33\"),\"cremaRating\":5,\"tasteRating\":4,\"comment\":\"erdig\",\"origin\":\"\",\"roastLevel\":\"dark\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"18.99\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\"},{\"id\":16,\"roaster\":\"DieRÃ¶ster - Kaffee vom See\",\"description\":\"Uganda Indonesien\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"\",\"grindingDegree\":\"21\",\"percentArabica\":100,\"percentRobusta\":0,\"cuppingTime\":new Date(\"2023-06-08 08:45:36\"),\"cremaRating\":1,\"tasteRating\":1,\"comment\":\"\",\"origin\":\"UG,ID\",\"roastLevel\":\"medium\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"33.30\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\"},{\"id\":25,\"roaster\":\"Eduscho\",\"description\":\"Espresso Intenso\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"\",\"grindingDegree\":\"8\",\"percentArabica\":100,\"percentRobusta\":0,\"cuppingTime\":new Date(\"2025-06-04 14:18:08\"),\"cremaRating\":1,\"tasteRating\":2,\"comment\":\"erdig ist nicht meins\",\"origin\":\"\",\"roastLevel\":\"dark\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"16.99\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"18g dose stretched to 30 seconds - Americano style + extra fine sieve for more crema\"},{\"id\":1,\"roaster\":\"Happy Coffee\",\"description\":\"Sidamo Espresso\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"7\",\"grindingDegree\":\"7\",\"percentArabica\":100,\"percentRobusta\":0,\"cuppingTime\":new Date(\"2019-03-21 14:47:03\"),\"cremaRating\":5,\"tasteRating\":4,\"comment\":\"Als Espresso sehr gut und stark.\",\"origin\":\"ET\",\"roastLevel\":\"medium-dark\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"24.90\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\"},{\"id\":7,\"roaster\":\"Hrovat\",\"description\":\"BÃ¼robohne\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"3\",\"grindingDegree\":\"3\",\"percentArabica\":100,\"percentRobusta\":0,\"cuppingTime\":new Date(\"2019-11-25 14:57:16\"),\"cremaRating\":3,\"tasteRating\":3,\"comment\":\"etwas sÃ¤uerlich\",\"origin\":\"AT\",\"roastLevel\":\"medium\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"28.00\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\"},{\"id\":10,\"roaster\":\"Hrovat\",\"description\":\"Hallstattbohne\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"3\",\"grindingDegree\":\"7\",\"percentArabica\":100,\"percentRobusta\":0,\"cuppingTime\":new Date(\"2020-12-15 08:38:09\"),\"cremaRating\":3,\"tasteRating\":3,\"comment\":\"ist mir zu bitter\",\"origin\":\"AT\",\"roastLevel\":\"medium-dark\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"28.00\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\"},{\"id\":6,\"roaster\":\"Hrovat\",\"description\":\"Kaiserbohne\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"3\",\"grindingDegree\":\"3\",\"percentArabica\":100,\"percentRobusta\":0,\"cuppingTime\":new Date(\"2019-11-19 14:00:10\"),\"cremaRating\":3,\"tasteRating\":3,\"comment\":\"\",\"origin\":\"AT\",\"roastLevel\":\"medium\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"32.00\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\"},{\"id\":22,\"roaster\":\"Tchibo\",\"description\":\"Barista Espresso\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"\",\"grindingDegree\":\"19\",\"percentArabica\":100,\"percentRobusta\":0,\"cuppingTime\":new Date(\"2024-05-01 10:25:19\"),\"cremaRating\":2.5,\"tasteRating\":2.5,\"tasteNotes\":\"nutty, golden crema, Brazilian highlands\",\"url\":\"https://www.tchibo.de/products/280387747392/barista-espresso\",\"comment\":\"Sehr wenig SÃ¤ure, 100% Fairtrade, drum roasted\",\"origin\":\"BR\",\"roastLevel\":\"medium\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"19.99\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\",\"recommendedMethod\":\"espresso\"},{\"id\":23,\"roaster\":\"Tchibo\",\"description\":\"Barista Espresso Dark\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"\",\"grindingDegree\":\"10\",\"percentArabica\":70,\"percentRobusta\":30,\"cuppingTime\":new Date(\"2024-06-22 11:33:01\"),\"cremaRating\":3,\"tasteRating\":3,\"tasteNotes\":\"roasted nuts, velvety dark crema, intense\",\"url\":\"https://www.tchibo.de\",\"comment\":\"India and Brazil blend, dark roast\",\"origin\":\"IN,BR\",\"roastLevel\":\"dark\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"espresso\",\"price\":\"22.99\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\",\"recommendedMethod\":\"espresso\"},{\"id\":24,\"roaster\":\"Tchibo\",\"description\":\"Cafe Crema Barista\",\"favorite\":false,\"grinded\":false,\"grindingTime\":\"\",\"grindingDegree\":\"13\",\"percentArabica\":100,\"percentRobusta\":0,\"cuppingTime\":new Date(\"2024-06-22 11:33:37\"),\"cremaRating\":3,\"tasteRating\":3,\"tasteNotes\":\"mild, red berries, velvety crema\",\"url\":\"https://tchibo.us/pages/barista-coffees\",\"comment\":\"gut zum verdÃ¼nnen, geschmacklich fad, gut vertrÃ¤glich, South American beans\",\"origin\":\"SA\",\"roastLevel\":\"light\",\"brewingMethod\":\"espresso\",\"recommendedMethod\":\"filter\",\"price\":\"14.99\",\"packageSize\":1000,\"currency\":\"EUR\",\"preparationNotes\":\"Pure espresso\"}];// Data version for migration management\nconst DATA_VERSION='2.1';// Load data from localStorage on mount\nuseEffect(()=>{const loadedData=localStorage.getItem('coffeeTrackerData');const loadedVersion=localStorage.getItem('coffeeTrackerVersion');if(loadedData&&loadedVersion===DATA_VERSION){try{const parsedData=JSON.parse(loadedData);// Convert date strings back to Date objects\nconst coffeesWithDates=parsedData.map(coffee=>_objectSpread(_objectSpread({},coffee),{},{cuppingTime:new Date(coffee.cuppingTime)}));setCoffees(coffeesWithDates);console.log('âœ… Loaded existing data from localStorage');}catch(error){console.error('âŒ Error loading data from localStorage:',error);// Fall back to default data if there's an error\nsetCoffees(defaultCoffees);localStorage.setItem('coffeeTrackerVersion',DATA_VERSION);}}else{// No saved data or version mismatch - use updated default data\nconsole.log('ðŸ”„ Using fresh default data (version mismatch or first run)');setCoffees(defaultCoffees);localStorage.setItem('coffeeTrackerVersion',DATA_VERSION);}// Load dark mode preference\nconst savedDarkMode=localStorage.getItem('coffeeTrackerDarkMode');if(savedDarkMode!==null){setDarkMode(JSON.parse(savedDarkMode));}},[]);// Save data to localStorage whenever coffees change\nuseEffect(()=>{if(coffees.length>0){try{localStorage.setItem('coffeeTrackerData',JSON.stringify(coffees));localStorage.setItem('coffeeTrackerVersion',DATA_VERSION);localStorage.setItem('coffeeTrackerLastSaved',new Date().toISOString());console.log('ðŸ’¾ Data saved to localStorage');}catch(error){console.error('âŒ Error saving to localStorage:',error);if(error.name==='QuotaExceededError'){alert('Storage quota exceeded! Consider exporting your data.');}}}},[coffees]);// Save dark mode preference\nuseEffect(()=>{localStorage.setItem('coffeeTrackerDarkMode',JSON.stringify(darkMode));},[darkMode]);// Save collapsed roasters state\nuseEffect(()=>{localStorage.setItem('collapsedRoasters',JSON.stringify(collapsedRoasters));},[collapsedRoasters]);// Toggle roaster collapse state\nconst toggleRoasterCollapse=roasterName=>{setCollapsedRoasters(prev=>_objectSpread(_objectSpread({},prev),{},{[roasterName]:!prev[roasterName]}));};// Country codes mapping with names\nconst countryFlags={'BR':{flag:'ðŸ‡§ðŸ‡·',name:'Brazil'},'IN':{flag:'ðŸ‡®ðŸ‡³',name:'India'},'ET':{flag:'ðŸ‡ªðŸ‡¹',name:'Ethiopia'},'NI':{flag:'ðŸ‡³ðŸ‡®',name:'Nicaragua'},'IT':{flag:'ðŸ‡®ðŸ‡¹',name:'Italy'},'GT':{flag:'ðŸ‡¬ðŸ‡¹',name:'Guatemala'},'UG':{flag:'ðŸ‡ºðŸ‡¬',name:'Uganda'},'CR':{flag:'ðŸ‡¨ðŸ‡·',name:'Costa Rica'},'CO':{flag:'ðŸ‡¨ðŸ‡´',name:'Colombia'},'SV':{flag:'ðŸ‡¸ðŸ‡»',name:'El Salvador'},'EC':{flag:'ðŸ‡ªðŸ‡¨',name:'Ecuador'},'ID':{flag:'ðŸ‡®ðŸ‡©',name:'Indonesia'},'AT':{flag:'ðŸ‡¦ðŸ‡¹',name:'Austria'},'AS':{flag:'ðŸŒ',name:'Asia'},'LA':{flag:'ðŸŒŽ',name:'Latin America'},'SA':{flag:'ðŸŒŽ',name:'South America'}};// Roast level badge colors and text\nconst getRoastBadge=level=>{switch(level){case'light':return{bg:'bg-yellow-100 dark:bg-yellow-900',text:'text-yellow-800 dark:text-yellow-100',label:'Light Roast'};case'medium':return{bg:'bg-amber-100 dark:bg-amber-900',text:'text-amber-800 dark:text-amber-100',label:'Medium Roast'};case'medium-dark':return{bg:'bg-orange-100 dark:bg-orange-900',text:'text-orange-800 dark:text-orange-100',label:'Medium-Dark'};case'dark':return{bg:'bg-stone-200 dark:bg-stone-800',text:'text-stone-800 dark:text-stone-100',label:'Dark Roast'};default:return{bg:'bg-gray-100 dark:bg-gray-800',text:'text-gray-800 dark:text-gray-100',label:'Unknown'};}};// Parse taste notes for radar chart\nconst parseTasteProfile=tasteNotes=>{const profile={chocolate:0,nutty:0,fruity:0,floral:0,earthy:0,spicy:0,sweet:0,acidic:0};if(!tasteNotes)return profile;const notes=tasteNotes.toLowerCase();// Score each attribute based on keywords - using incremental scoring\nif(notes.includes('chocolate')||notes.includes('cocoa')||notes.includes('cacao'))profile.chocolate=4;if(notes.includes('dark chocolate'))profile.chocolate=5;if(notes.includes('nutty')||notes.includes('nut'))profile.nutty=3;if(notes.includes('almond'))profile.nutty=Math.max(profile.nutty,4);if(notes.includes('hazelnut'))profile.nutty=Math.max(profile.nutty,4);if(notes.includes('walnut'))profile.nutty=Math.max(profile.nutty,4);if(notes.includes('pecan'))profile.nutty=Math.max(profile.nutty,4);if(notes.includes('fruity')||notes.includes('fruit'))profile.fruity=4;if(notes.includes('berry')||notes.includes('berries'))profile.fruity=Math.max(profile.fruity,4);if(notes.includes('citrus'))profile.fruity=Math.max(profile.fruity,4);if(notes.includes('lemon'))profile.fruity=Math.max(profile.fruity,3);if(notes.includes('floral')||notes.includes('flower')||notes.includes('jasmine'))profile.floral=4;if(notes.includes('earthy'))profile.earthy=4;if(notes.includes('woody')||notes.includes('wood'))profile.earthy=Math.max(profile.earthy,4);if(notes.includes('spicy')||notes.includes('spice'))profile.spicy=4;if(notes.includes('cinnamon'))profile.spicy=Math.max(profile.spicy,3);if(notes.includes('sweet'))profile.sweet=3;if(notes.includes('caramel'))profile.sweet=Math.max(profile.sweet,4);if(notes.includes('honey'))profile.sweet=Math.max(profile.sweet,4);if(notes.includes('sugar'))profile.sweet=Math.max(profile.sweet,3);if(notes.includes('acid')||notes.includes('bright')||notes.includes('lively'))profile.acidic=4;if(notes.includes('low acidity')||notes.includes('no acidity'))profile.acidic=1;return profile;};// Cost calculation functions\nconst calculateCostPerCup=coffee=>{if(!coffee.price||!coffee.packageSize)return null;const pricePerGram=parseFloat(coffee.price)/coffee.packageSize;// Typical espresso shot uses 18-20g, let's use 18g as default\nconst gramsPerCup=coffee.brewingMethod==='filter'?15:18;const costPerCup=pricePerGram*gramsPerCup;return{costPerCup:costPerCup.toFixed(3),pricePerKg:(parseFloat(coffee.price)/coffee.packageSize*1000).toFixed(2),currency:coffee.currency||'EUR'};};const calculateValueScore=coffee=>{const cost=calculateCostPerCup(coffee);if(!cost||coffee.tasteRating===0)return null;// Value score = taste rating / cost per cup (higher is better)\nconst valueScore=coffee.tasteRating/parseFloat(cost.costPerCup);return valueScore.toFixed(1);};// Fixed Analytics calculations\nconst getAnalyticsData=()=>{// Favorite roasters - improved calculation\nconst roasterCounts=coffees.reduce((acc,coffee)=>{const roaster=coffee.roaster.split(' - ')[0].trim();acc[roaster]=(acc[roaster]||0)+1;return acc;},{});const roasterData=Object.entries(roasterCounts).map(_ref=>{let[name,count]=_ref;return{name,count};}).sort((a,b)=>b.count-a.count).slice(0,6);// Show top 6 roasters\n// Arabica/Robusta preference - improved calculation\nconst totalCoffees=coffees.length;const avgArabica=totalCoffees>0?coffees.reduce((sum,c)=>sum+c.percentArabica,0)/totalCoffees:50;const avgRobusta=100-avgArabica;const blendData=[{name:'Arabica',value:Math.round(avgArabica),fill:'#8B4513'},{name:'Robusta',value:Math.round(avgRobusta),fill:'#D2691E'}];// Rating trends over time - improved calculation with proper sorting\nconst ratingTrends=coffees.sort((a,b)=>new Date(a.cuppingTime)-new Date(b.cuppingTime)).map((coffee,index)=>({date:new Date(coffee.cuppingTime).toLocaleDateString('en-US',{month:'short',year:'2-digit'}),rating:coffee.tasteRating,crema:coffee.cremaRating,name:coffee.roaster.split(' - ')[0],index:index+1}));// Roast level distribution\nconst roastLevelCounts=coffees.reduce((acc,coffee)=>{const level=coffee.roastLevel||'unknown';acc[level]=(acc[level]||0)+1;return acc;},{});const roastLevelData=Object.entries(roastLevelCounts).map(_ref2=>{let[level,count]=_ref2;return{level:level.charAt(0).toUpperCase()+level.slice(1),count,fill:level==='light'?'#D2B48C':level==='medium'?'#8B4513':level==='medium-dark'?'#654321':level==='dark'?'#3C1810':'#A0A0A0'};});// Origin country analysis\nconst originCounts=coffees.reduce((acc,coffee)=>{if(coffee.origin){const countries=coffee.origin.split(',').map(c=>c.trim());countries.forEach(country=>{if(countryFlags[country]){acc[country]=(acc[country]||0)+1;}});}return acc;},{});const originData=Object.entries(originCounts).map(_ref3=>{var _countryFlags$code,_countryFlags$code2;let[code,count]=_ref3;return{country:((_countryFlags$code=countryFlags[code])===null||_countryFlags$code===void 0?void 0:_countryFlags$code.name)||code,code,count,flag:((_countryFlags$code2=countryFlags[code])===null||_countryFlags$code2===void 0?void 0:_countryFlags$code2.flag)||'ðŸŒ'};}).sort((a,b)=>b.count-a.count).slice(0,8);// Grind settings by brand - NEW CALCULATION\nconst grindByBrand=coffees.filter(c=>c.grindingDegree&&!isNaN(parseInt(c.grindingDegree))).reduce((acc,coffee)=>{const brand=coffee.roaster.split(' - ')[0].trim();const grind=parseInt(coffee.grindingDegree);if(!acc[brand]){acc[brand]={total:0,count:0,grinds:[]};}acc[brand].total+=grind;acc[brand].count+=1;acc[brand].grinds.push(grind);return acc;},{});const grindByBrandData=Object.entries(grindByBrand).map(_ref4=>{let[brand,data]=_ref4;return{brand,avgGrind:Math.round(data.total/data.count*10)/10,count:data.count,minGrind:Math.min(...data.grinds),maxGrind:Math.max(...data.grinds)};}).sort((a,b)=>a.avgGrind-b.avgGrind);// Price analysis\nconst coffeesWithPrice=coffees.filter(c=>c.price&&!isNaN(parseFloat(c.price)));const priceAnalysis=coffeesWithPrice.map(coffee=>{const cost=calculateCostPerCup(coffee);return{name:coffee.roaster.split(' - ')[0],coffee:coffee.description,costPerCup:parseFloat(cost.costPerCup),pricePerKg:parseFloat(cost.pricePerKg),tasteRating:coffee.tasteRating,valueScore:parseFloat(calculateValueScore(coffee))||0};}).sort((a,b)=>a.costPerCup-b.costPerCup);const avgCostPerCup=priceAnalysis.length>0?(priceAnalysis.reduce((sum,c)=>sum+c.costPerCup,0)/priceAnalysis.length).toFixed(3):null;return{roasterData,blendData,ratingTrends,roastLevelData,originData,grindByBrandData,priceAnalysis,avgCostPerCup};};const[formData,setFormData]=useState({roaster:'',description:'',favorite:false,grinded:false,grindingTime:'',grindingDegree:'',percentArabica:100,percentRobusta:0,cremaRating:0,tasteRating:0,tasteNotes:'',url:'',comment:'',origin:'',roastLevel:'medium',brewingMethod:'espresso',recommendedMethod:'espresso',price:'',packageSize:1000,currency:'EUR',preparationNotes:'',coffeeGroup:''});const resetForm=()=>{setFormData({roaster:'',description:'',favorite:false,grinded:false,grindingTime:'',grindingDegree:'',percentArabica:100,percentRobusta:0,cremaRating:0,tasteRating:0,tasteNotes:'',url:'',comment:'',origin:'',roastLevel:'medium',brewingMethod:'espresso',recommendedMethod:'espresso',price:'',packageSize:1000,currency:'EUR',preparationNotes:'',coffeeGroup:''});};const handleSubmit=()=>{const newCoffee=_objectSpread(_objectSpread({},formData),{},{id:editingCoffee?editingCoffee.id:Date.now(),cuppingTime:editingCoffee?editingCoffee.cuppingTime:new Date(),percentArabica:parseInt(formData.percentArabica),percentRobusta:parseInt(formData.percentRobusta),grindingTime:formData.grindingTime||'',grindingDegree:formData.grindingDegree||'',cremaRating:parseInt(formData.cremaRating),tasteRating:parseInt(formData.tasteRating),tasteNotes:formData.tasteNotes||'',url:formData.url||''});if(editingCoffee){setCoffees(coffees.map(coffee=>coffee.id===editingCoffee.id?newCoffee:coffee));setEditingCoffee(null);}else{setCoffees([...coffees,newCoffee]);}resetForm();setShowAddForm(false);};const handleEdit=coffee=>{setFormData({roaster:coffee.roaster,description:coffee.description,favorite:coffee.favorite,grinded:coffee.grinded,grindingTime:coffee.grindingTime||'',grindingDegree:coffee.grindingDegree||'',percentArabica:coffee.percentArabica,percentRobusta:coffee.percentRobusta,cremaRating:coffee.cremaRating,tasteRating:coffee.tasteRating,tasteNotes:coffee.tasteNotes||'',url:coffee.url||'',comment:coffee.comment||'',origin:coffee.origin||'',roastLevel:coffee.roastLevel||'medium',brewingMethod:coffee.brewingMethod||'espresso',recommendedMethod:coffee.recommendedMethod||'espresso',price:coffee.price||'',packageSize:coffee.packageSize||1000,currency:coffee.currency||'EUR',preparationNotes:coffee.preparationNotes||'',coffeeGroup:coffee.coffeeGroup||''});setEditingCoffee(coffee);setShowAddForm(true);};const handleDelete=id=>{setCoffees(coffees.filter(coffee=>coffee.id!==id));};// Copy coffee for different preparation methods\nconst handleCopy=coffee=>{const newCoffee=_objectSpread(_objectSpread({},coffee),{},{id:Date.now(),cuppingTime:new Date(),cremaRating:0,tasteRating:0,preparationNotes:'',comment:'',// Create or maintain group ID for related coffees\ncoffeeGroup:coffee.coffeeGroup||\"\".concat(coffee.roaster,\"-\").concat(coffee.description).replace(/[^a-zA-Z0-9]/g,'-').toLowerCase()});// Also update the original coffee with group ID if it doesn't have one\nif(!coffee.coffeeGroup){const updatedCoffees=coffees.map(c=>c.id===coffee.id?_objectSpread(_objectSpread({},c),{},{coffeeGroup:newCoffee.coffeeGroup}):c);setCoffees([...updatedCoffees,newCoffee]);}else{setCoffees([...coffees,newCoffee]);}// Pre-fill form with the new coffee for editing\nsetFormData({roaster:newCoffee.roaster,description:newCoffee.description,favorite:newCoffee.favorite,grinded:newCoffee.grinded,grindingTime:newCoffee.grindingTime||'',grindingDegree:newCoffee.grindingDegree||'',percentArabica:newCoffee.percentArabica,percentRobusta:newCoffee.percentRobusta,cremaRating:newCoffee.cremaRating,tasteRating:newCoffee.tasteRating,tasteNotes:newCoffee.tasteNotes||'',url:newCoffee.url||'',comment:newCoffee.comment||'',origin:newCoffee.origin||'',roastLevel:newCoffee.roastLevel||'medium',brewingMethod:newCoffee.brewingMethod||'espresso',recommendedMethod:newCoffee.recommendedMethod||'espresso',price:newCoffee.price||'',packageSize:newCoffee.packageSize||1000,currency:newCoffee.currency||'EUR',preparationNotes:newCoffee.preparationNotes||'',coffeeGroup:newCoffee.coffeeGroup});setEditingCoffee(newCoffee);setShowAddForm(true);};// Export data to JSON file\nconst handleExport=()=>{const dataToExport={version:'1.0',exportDate:new Date().toISOString(),coffees:coffees};const jsonString=JSON.stringify(dataToExport,null,2);const blob=new Blob([jsonString],{type:'application/json'});const url=URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=\"coffee-tracker-export-\".concat(new Date().toISOString().split('T')[0],\".json\");document.body.appendChild(link);link.click();document.body.removeChild(link);URL.revokeObjectURL(url);};// Export data to PDF\nconst handlePDFExport=()=>{const doc=new jsPDF();const pageHeight=doc.internal.pageSize.height;let yPosition=20;// Title\ndoc.setFontSize(20);doc.setFont(undefined,'bold');doc.text('Coffee Collection',20,yPosition);yPosition+=15;// Summary stats\ndoc.setFontSize(12);doc.setFont(undefined,'normal');doc.text(\"Total Coffees: \".concat(coffees.length),20,yPosition);yPosition+=8;doc.text(\"Favorites: \".concat(coffees.filter(c=>c.favorite).length),20,yPosition);yPosition+=8;const avgRating=coffees.length>0?(coffees.reduce((sum,c)=>sum+c.tasteRating,0)/coffees.length).toFixed(1):'0';doc.text(\"Average Rating: \".concat(avgRating,\"/5\"),20,yPosition);yPosition+=15;// Coffee list\ndoc.setFont(undefined,'bold');doc.text('Coffee Details:',20,yPosition);yPosition+=10;doc.setFont(undefined,'normal');const sortedCoffees=[...coffees].sort((a,b)=>b.tasteRating-a.tasteRating);sortedCoffees.forEach((coffee,index)=>{// Check if we need a new page\nif(yPosition>pageHeight-40){doc.addPage();yPosition=20;}// Coffee header\ndoc.setFont(undefined,'bold');doc.setFontSize(12);doc.text(\"\".concat(index+1,\". \").concat(coffee.roaster),20,yPosition);yPosition+=6;doc.setFont(undefined,'normal');doc.setFontSize(10);// Description\ndoc.text(\"Description: \".concat(coffee.description),25,yPosition);yPosition+=5;// Ratings with stars\nconst stars=rating=>'â˜…'.repeat(rating)+'â˜†'.repeat(5-rating);doc.text(\"Taste: \".concat(stars(coffee.tasteRating),\" (\").concat(coffee.tasteRating,\"/5)\"),25,yPosition);yPosition+=5;doc.text(\"Crema: \".concat(stars(coffee.cremaRating),\" (\").concat(coffee.cremaRating,\"/5)\"),25,yPosition);yPosition+=5;// Blend\ndoc.text(\"Blend: \".concat(coffee.percentArabica,\"% Arabica, \").concat(coffee.percentRobusta,\"% Robusta\"),25,yPosition);yPosition+=5;// Roast level\nif(coffee.roastLevel){doc.text(\"Roast: \".concat(coffee.roastLevel.charAt(0).toUpperCase()+coffee.roastLevel.slice(1)),25,yPosition);yPosition+=5;}// Brewing methods\nif(coffee.brewingMethod){const method=brewingMethods.find(m=>m.id===coffee.brewingMethod);doc.text(\"Your Method: \".concat(method?method.name:coffee.brewingMethod),25,yPosition);yPosition+=5;}if(coffee.recommendedMethod&&coffee.recommendedMethod!==coffee.brewingMethod){const recMethod=brewingMethods.find(m=>m.id===coffee.recommendedMethod);doc.text(\"Recommended: \".concat(recMethod?recMethod.name:coffee.recommendedMethod),25,yPosition);yPosition+=5;}// Grind settings\nif(coffee.grindingDegree){doc.text(\"Grind Level: \".concat(coffee.grindingDegree),25,yPosition);yPosition+=5;}// Origin\nif(coffee.origin){const origins=coffee.origin.split(',').map(code=>{const country=countryFlags[code.trim()];return country?country.name:code.trim();}).join(', ');doc.text(\"Origin: \".concat(origins),25,yPosition);yPosition+=5;}// Taste notes\nif(coffee.tasteNotes){const maxWidth=160;const lines=doc.splitTextToSize(\"Taste Notes: \".concat(coffee.tasteNotes),maxWidth);lines.forEach(line=>{doc.text(line,25,yPosition);yPosition+=5;});}// Preparation notes\nif(coffee.preparationNotes){doc.text(\"Preparation: \".concat(coffee.preparationNotes),25,yPosition);yPosition+=5;}// Comment\nif(coffee.comment){const maxWidth=160;const lines=doc.splitTextToSize(\"Notes: \".concat(coffee.comment),maxWidth);lines.forEach(line=>{doc.text(line,25,yPosition);yPosition+=5;});}// Date\ndoc.text(\"Cupped: \".concat(new Date(coffee.cuppingTime).toLocaleDateString()),25,yPosition);yPosition+=5;// Price information\nif(coffee.price){doc.text(\"Price: \".concat(coffee.price,\" \").concat(coffee.currency||'EUR',\" / \").concat(coffee.packageSize||1000,\"g\"),25,yPosition);yPosition+=5;const cost=calculateCostPerCup(coffee);if(cost){doc.text(\"Cost per cup: \".concat(cost.costPerCup,\" \").concat(cost.currency),25,yPosition);yPosition+=5;const valueScore=calculateValueScore(coffee);if(valueScore){doc.text(\"Value score: \".concat(valueScore,\" (taste/cost ratio)\"),25,yPosition);yPosition+=5;}}}// Favorite indicator\nif(coffee.favorite){doc.text('â˜… FAVORITE',25,yPosition);yPosition+=5;}yPosition+=5;// Space between coffees\n});// Footer\nconst totalPages=doc.internal.getNumberOfPages();for(let i=1;i<=totalPages;i++){doc.setPage(i);doc.setFontSize(8);doc.text(\"Generated by Coffee Tracker - Page \".concat(i,\" of \").concat(totalPages),20,pageHeight-10);doc.text(new Date().toLocaleDateString(),doc.internal.pageSize.width-50,pageHeight-10);}// Save the PDF\ndoc.save(\"coffee-collection-\".concat(new Date().toISOString().split('T')[0],\".pdf\"));};// Clear localStorage and reset to default data (DANGEROUS)\nconst handleResetToDefaults=()=>{const storageInfo=getStorageInfo();const confirmText='RESET ALL DATA';const userInput=prompt(\"\\u26A0\\uFE0F DANGER: This will PERMANENTLY DELETE all your coffee data!\\n\\n\"+\"You will lose:\\n\"+\"\\u2022 \".concat(coffees.length,\" coffee entries\\n\")+\"\\u2022 All your personal ratings and comments\\n\"+\"\\u2022 All cupping dates and custom data\\n\"+\"\\u2022 \".concat(storageInfo?storageInfo.sizeKB:'?',\"KB of stored data\\n\\n\")+\"This CANNOT be undone!\\n\\n\"+\"If you really want to continue, type exactly: \".concat(confirmText));if(userInput===confirmText){// Double confirmation\nif(window.confirm('âš ï¸ FINAL WARNING: Are you absolutely sure? This will delete everything!')){localStorage.removeItem('coffeeTrackerData');localStorage.removeItem('coffeeTrackerVersion');localStorage.removeItem('coffeeTrackerLastSaved');setCoffees(defaultCoffees);localStorage.setItem('coffeeTrackerVersion',DATA_VERSION);alert('âœ… Data reset to defaults. All previous data has been deleted.');}}else if(userInput!==null){alert('âŒ Reset cancelled. Text did not match exactly.');}};// Force refresh data (bypass version check)\nconst handleForceRefresh=()=>{if(window.confirm('This will update your data with any missing fields from the latest version. Existing data will be preserved. Continue?')){const migratedData=coffees.map(coffee=>_objectSpread(_objectSpread({},coffee),{},{// Ensure all new fields exist\nbrewingMethod:coffee.brewingMethod||'espresso',recommendedMethod:coffee.recommendedMethod||'espresso',price:coffee.price||'',packageSize:coffee.packageSize||1000,currency:coffee.currency||'EUR',preparationNotes:coffee.preparationNotes||(new Date(coffee.cuppingTime)<new Date('2024-12-01')?'Pure espresso':''),coffeeGroup:coffee.coffeeGroup||''}));setCoffees(migratedData);localStorage.setItem('coffeeTrackerVersion',DATA_VERSION);alert('âœ… Data migrated to latest version!');}};// Check localStorage usage\nconst getStorageInfo=()=>{try{const data=localStorage.getItem('coffeeTrackerData');const version=localStorage.getItem('coffeeTrackerVersion');const lastSaved=localStorage.getItem('coffeeTrackerLastSaved');const sizeKB=data?(new Blob([data]).size/1024).toFixed(2):'0';return{version,lastSaved:lastSaved?new Date(lastSaved).toLocaleString():'Never',sizeKB,coffeeCount:coffees.length};}catch(error){return null;}};// Import data from JSON file\nconst handleImport=event=>{const file=event.target.files[0];if(!file)return;const reader=new FileReader();reader.onload=e=>{try{const importedData=JSON.parse(e.target.result);// Validate the imported data\nif(!importedData.coffees||!Array.isArray(importedData.coffees)){alert('Invalid file format. Please select a valid Coffee Tracker export file.');return;}// Convert date strings back to Date objects\nconst importedCoffees=importedData.coffees.map(coffee=>_objectSpread(_objectSpread({},coffee),{},{cuppingTime:new Date(coffee.cuppingTime),// Ensure each coffee has a unique ID\nid:coffee.id||Date.now()+Math.random()}));// Ask user if they want to replace or merge\nconst shouldReplace=window.confirm(\"Import \".concat(importedCoffees.length,\" coffees?\\n\\n\")+'OK = Replace all current data\\n'+'Cancel = Merge with existing data');if(shouldReplace){setCoffees(importedCoffees);}else{// Merge: add imported coffees with new IDs to avoid conflicts\nconst maxId=Math.max(...coffees.map(c=>c.id),0);const mergedCoffees=[...coffees,...importedCoffees.map((coffee,index)=>_objectSpread(_objectSpread({},coffee),{},{id:maxId+index+1}))];setCoffees(mergedCoffees);}alert(\"Successfully imported \".concat(importedCoffees.length,\" coffees!\"));}catch(error){console.error('Import error:',error);alert('Error importing file. Please make sure it\\'s a valid Coffee Tracker export.');}};reader.readAsText(file);// Reset file input\nevent.target.value='';};const filteredCoffees=coffees.filter(coffee=>{const matchesSearch=coffee.roaster.toLowerCase().includes(searchTerm.toLowerCase())||coffee.description.toLowerCase().includes(searchTerm.toLowerCase());const matchesFavorite=!filterFavorites||coffee.favorite;return matchesSearch&&matchesFavorite;}).sort((a,b)=>{switch(sortBy){case'rating':return b.tasteRating-a.tasteRating;case'roaster':return a.roaster.localeCompare(b.roaster);case'priceLowHigh':const costA=calculateCostPerCup(a);const costB=calculateCostPerCup(b);if(!costA)return 1;if(!costB)return-1;return parseFloat(costA.costPerCup)-parseFloat(costB.costPerCup);case'priceHighLow':const costA2=calculateCostPerCup(a);const costB2=calculateCostPerCup(b);if(!costA2)return 1;if(!costB2)return-1;return parseFloat(costB2.costPerCup)-parseFloat(costA2.costPerCup);case'value':const valueA=calculateValueScore(a);const valueB=calculateValueScore(b);if(!valueA)return 1;if(!valueB)return-1;return parseFloat(valueB)-parseFloat(valueA);case'date':default:return new Date(b.cuppingTime)-new Date(a.cuppingTime);}});const StarRating=_ref5=>{let{rating,onRatingChange,readOnly=false,size='normal'}=_ref5;const sizeClass=size==='small'?'w-4 h-4':'w-5 h-5';return/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-1\",children:[1,2,3,4,5].map(star=>/*#__PURE__*/_jsx(Star,{className:\"\".concat(sizeClass,\" cursor-pointer transition-colors \").concat(star<=rating?'text-yellow-400 fill-yellow-400':darkMode?'text-gray-600 hover:text-yellow-300':'text-gray-300 hover:text-yellow-300',\" \").concat(readOnly?'cursor-default':''),onClick:()=>!readOnly&&onRatingChange&&onRatingChange(star)},star))});};// Prepare radar data for selected coffee\nconst getRadarData=coffee=>{const profile=parseTasteProfile(coffee.tasteNotes);return Object.entries(profile).map(_ref6=>{let[taste,value]=_ref6;return{taste:taste.charAt(0).toUpperCase()+taste.slice(1),value};});};const analytics=getAnalyticsData();// Custom tooltip component for better formatting\nconst CustomTooltip=_ref7=>{let{active,payload,label}=_ref7;if(active&&payload&&payload.length){return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(darkMode?'bg-gray-800 border-gray-600':'bg-white border-gray-200',\" p-3 rounded-lg shadow-lg border\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"\".concat(darkMode?'text-white':'text-gray-900',\" font-medium\"),children:label}),payload.map((entry,index)=>/*#__PURE__*/_jsx(\"p\",{style:{color:entry.color},children:\"\".concat(entry.dataKey,\": \").concat(entry.value)},index))]});}return null;};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen \".concat(darkMode?'bg-gray-900':'bg-gradient-to-br from-amber-50 to-orange-100',\" p-4 transition-colors\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(darkMode?'bg-gray-800 text-white':'bg-white',\" rounded-2xl shadow-xl p-6 mb-6 transition-colors\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between flex-wrap gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(Coffee,{className:\"w-8 h-8 text-amber-600\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold \".concat(darkMode?'text-white':'text-gray-800'),children:\"Coffee Tracker\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setDarkMode(!darkMode),className:\"p-2 rounded-lg \".concat(darkMode?'bg-gray-700 text-yellow-400':'bg-gray-200 text-gray-700',\" transition-colors\"),children:darkMode?/*#__PURE__*/_jsx(Sun,{className:\"w-5 h-5\"}):/*#__PURE__*/_jsx(Moon,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleExport,className:\"p-2 rounded-lg \".concat(darkMode?'bg-gray-700 text-gray-300 hover:bg-gray-600':'bg-gray-200 text-gray-700 hover:bg-gray-300',\" transition-colors\"),title:\"Export JSON data\",children:/*#__PURE__*/_jsx(Download,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePDFExport,className:\"p-2 rounded-lg \".concat(darkMode?'bg-gray-700 text-red-300 hover:bg-gray-600':'bg-gray-200 text-red-700 hover:bg-gray-300',\" transition-colors\"),title:\"Export PDF catalog\",children:/*#__PURE__*/_jsx(FileText,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();},className:\"p-2 rounded-lg \".concat(darkMode?'bg-gray-700 text-gray-300 hover:bg-gray-600':'bg-gray-200 text-gray-700 hover:bg-gray-300',\" transition-colors\"),title:\"Import data\",children:/*#__PURE__*/_jsx(Upload,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleForceRefresh,className:\"p-2 rounded-lg \".concat(darkMode?'bg-gray-700 text-blue-300 hover:bg-gray-600':'bg-gray-200 text-blue-700 hover:bg-gray-300',\" transition-colors\"),title:\"Update to latest version (safe)\",children:/*#__PURE__*/_jsx(RefreshCw,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"border-l border-gray-400 ml-2 pl-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleResetToDefaults,className:\"p-2 rounded-lg \".concat(darkMode?'bg-red-900 text-red-300 hover:bg-red-800':'bg-red-100 text-red-700 hover:bg-red-200',\" transition-colors border \").concat(darkMode?'border-red-700':'border-red-300'),title:\"\\u26A0\\uFE0F DANGER: Reset ALL data to defaults (EXPORT FIRST!)\",children:/*#__PURE__*/_jsx(RotateCcw,{className:\"w-5 h-5\"})})}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",accept:\".json\",onChange:handleImport,className:\"hidden\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAnalytics(!showAnalytics),className:\"\".concat(darkMode?'bg-blue-600 hover:bg-blue-700':'bg-blue-500 hover:bg-blue-600',\" text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors\"),children:[/*#__PURE__*/_jsx(BarChart3,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Analytics\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{resetForm();setEditingCoffee(null);setShowAddForm(true);},className:\"bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Add Coffee\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(darkMode?'bg-gray-700':'bg-amber-50',\" p-4 rounded-lg transition-colors\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-amber-600\",children:coffees.length}),/*#__PURE__*/_jsx(\"div\",{className:darkMode?'text-gray-300':'text-gray-600',children:\"Total Coffees\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(darkMode?'bg-gray-700':'bg-amber-50',\" p-4 rounded-lg transition-colors\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-amber-600\",children:coffees.filter(c=>c.favorite).length}),/*#__PURE__*/_jsx(\"div\",{className:darkMode?'text-gray-300':'text-gray-600',children:\"Favorites\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(darkMode?'bg-gray-700':'bg-amber-50',\" p-4 rounded-lg transition-colors\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-amber-600\",children:coffees.length>0?(coffees.reduce((sum,c)=>sum+c.tasteRating,0)/coffees.length).toFixed(1):'0'}),/*#__PURE__*/_jsx(\"div\",{className:darkMode?'text-gray-300':'text-gray-600',children:\"Avg Rating\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(darkMode?'bg-gray-700':'bg-amber-50',\" p-4 rounded-lg transition-colors\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-green-600\",children:analytics.avgCostPerCup?\"\".concat(analytics.avgCostPerCup,\" \\u20AC\"):'N/A'}),/*#__PURE__*/_jsx(\"div\",{className:darkMode?'text-gray-300':'text-gray-600',children:\"Avg Cost/Cup\"})]})]}),(()=>{const storageInfo=getStorageInfo();return storageInfo&&/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(darkMode?'bg-gray-700':'bg-blue-50',\" p-3 rounded-lg mt-4 border-l-4 border-blue-500\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between flex-wrap gap-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:darkMode?'text-gray-300':'text-gray-700',children:[\"\\uD83D\\uDCBE Data Version: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-mono\",children:storageInfo.version}),\" | Size: \",/*#__PURE__*/_jsxs(\"span\",{className:\"font-mono\",children:[storageInfo.sizeKB,\"KB\"]}),\" | Last Saved: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-mono\",children:storageInfo.lastSaved})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs \".concat(darkMode?'text-gray-400':'text-gray-500'),children:[storageInfo.coffeeCount,\" coffees in storage\"]})]})});})()]}),showAnalytics&&/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(darkMode?'bg-gray-800 text-white':'bg-white',\" rounded-2xl shadow-xl p-6 mb-6 transition-colors\"),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6\",children:\"Coffee Analytics & Insights\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(darkMode?'bg-gray-700':'bg-amber-50',\" p-4 rounded-lg mb-6 border-l-4 border-amber-500\"),children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-2 flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-amber-600 mr-2\",children:\"\\uD83D\\uDCA1\"}),\"Value Score Explained\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:/*#__PURE__*/_jsx(\"strong\",{children:\"Value Score = Taste Rating \\xF7 Cost per Cup\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(darkMode?'text-gray-300':'text-gray-700'),children:\"Higher scores mean better value for money. A 5-star coffee at \\u20AC0.50/cup (Value: 10.0) offers better value than a 5-star coffee at \\u20AC1.00/cup (Value: 5.0). Scores above 5 are generally good value.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Top Roasters\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:250,children:/*#__PURE__*/_jsxs(BarChart,{data:analytics.roasterData,margin:{top:20,right:30,left:20,bottom:80},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\",stroke:darkMode?'#374151':'#e5e7eb'}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\",stroke:darkMode?'#9ca3af':'#6b7280',angle:-45,textAnchor:\"end\",height:80,interval:0,fontSize:12}),/*#__PURE__*/_jsx(YAxis,{stroke:darkMode?'#9ca3af':'#6b7280'}),/*#__PURE__*/_jsx(Tooltip,{content:/*#__PURE__*/_jsx(CustomTooltip,{})}),/*#__PURE__*/_jsx(Bar,{dataKey:\"count\",fill:\"#f59e0b\",radius:[4,4,0,0]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Average Blend Preference\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:250,children:/*#__PURE__*/_jsxs(PieChart,{margin:{top:20,right:20,bottom:20,left:20},children:[/*#__PURE__*/_jsx(Pie,{data:analytics.blendData,cx:\"50%\",cy:\"50%\",labelLine:false,outerRadius:80,dataKey:\"value\",children:analytics.blendData.map((entry,index)=>/*#__PURE__*/_jsx(Cell,{fill:entry.fill},\"cell-\".concat(index)))}),/*#__PURE__*/_jsx(Tooltip,{content:/*#__PURE__*/_jsx(CustomTooltip,{})}),/*#__PURE__*/_jsx(Legend,{verticalAlign:\"bottom\",height:36,formatter:(value,entry)=>\"\".concat(value,\": \").concat(entry.payload.value,\"%\")})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Rating Trends Over Time\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:250,children:/*#__PURE__*/_jsxs(LineChart,{data:analytics.ratingTrends,margin:{top:20,right:30,left:20,bottom:60},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\",stroke:darkMode?'#374151':'#e5e7eb'}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"date\",stroke:darkMode?'#9ca3af':'#6b7280',angle:-45,textAnchor:\"end\",height:60,interval:Math.max(0,Math.floor(analytics.ratingTrends.length/10)),fontSize:12}),/*#__PURE__*/_jsx(YAxis,{domain:[0,5],stroke:darkMode?'#9ca3af':'#6b7280'}),/*#__PURE__*/_jsx(Tooltip,{content:/*#__PURE__*/_jsx(CustomTooltip,{})}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"rating\",stroke:\"#f59e0b\",strokeWidth:2,dot:{r:4,fill:'#f59e0b'},name:\"Taste Rating\"}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"crema\",stroke:\"#8b4513\",strokeWidth:2,dot:{r:4,fill:'#8b4513'},name:\"Crema Rating\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Coffee Origins\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:250,children:/*#__PURE__*/_jsxs(BarChart,{data:analytics.originData,margin:{top:20,right:30,left:20,bottom:80},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\",stroke:darkMode?'#374151':'#e5e7eb'}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"code\",stroke:darkMode?'#9ca3af':'#6b7280',angle:-45,textAnchor:\"end\",height:80,interval:0,fontSize:12}),/*#__PURE__*/_jsx(YAxis,{stroke:darkMode?'#9ca3af':'#6b7280'}),/*#__PURE__*/_jsx(Tooltip,{content:/*#__PURE__*/_jsx(CustomTooltip,{})}),/*#__PURE__*/_jsx(Bar,{dataKey:\"count\",fill:\"#10b981\",radius:[4,4,0,0]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Roast Level Distribution\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:250,children:/*#__PURE__*/_jsxs(PieChart,{children:[/*#__PURE__*/_jsx(Pie,{data:analytics.roastLevelData,cx:\"50%\",cy:\"50%\",labelLine:false,label:_ref8=>{let{level,count}=_ref8;return\"\".concat(level,\": \").concat(count);},outerRadius:80,dataKey:\"count\",children:analytics.roastLevelData.map((entry,index)=>/*#__PURE__*/_jsx(Cell,{fill:entry.fill},\"cell-\".concat(index)))}),/*#__PURE__*/_jsx(Tooltip,{content:/*#__PURE__*/_jsx(CustomTooltip,{})})]})})]}),analytics.priceAnalysis&&analytics.priceAnalysis.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Cost Analysis\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm \".concat(darkMode?'text-gray-300':'text-gray-600'),children:[\"Average cost per cup: \",/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-green-600\",children:[analytics.avgCostPerCup,\" EUR\"]})]})}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(BarChart,{data:analytics.priceAnalysis.slice(0,10),margin:{top:20,right:30,left:60,bottom:80},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\",stroke:darkMode?'#374151':'#e5e7eb'}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\",stroke:darkMode?'#9ca3af':'#6b7280',angle:-45,textAnchor:\"end\",height:80,interval:0,fontSize:12}),/*#__PURE__*/_jsx(YAxis,{stroke:darkMode?'#9ca3af':'#6b7280',label:{value:'Cost per Cup (EUR)',angle:-90,position:'insideLeft'}}),/*#__PURE__*/_jsx(Tooltip,{content:_ref9=>{let{active,payload,label}=_ref9;if(active&&payload&&payload.length){const data=payload[0].payload;return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(darkMode?'bg-gray-800 border-gray-600':'bg-white border-gray-200',\" p-3 rounded-lg shadow-lg border\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"\".concat(darkMode?'text-white':'text-gray-900',\" font-medium\"),children:label}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(darkMode?'text-gray-300':'text-gray-600'),children:data.coffee}),/*#__PURE__*/_jsxs(\"p\",{style:{color:payload[0].color},children:[\"Cost: \",data.costPerCup.toFixed(3),\" EUR/cup\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Taste: \",data.tasteRating,\"/5 | Value: \",data.valueScore]})]});}return null;}}),/*#__PURE__*/_jsx(Bar,{dataKey:\"costPerCup\",fill:\"#10b981\",radius:[4,4,0,0]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Grind Settings by Brand\"}),analytics.grindByBrandData&&analytics.grindByBrandData.length>0?/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(BarChart,{data:analytics.grindByBrandData,margin:{top:20,right:30,left:60,bottom:80},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\",stroke:darkMode?'#374151':'#e5e7eb'}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"brand\",stroke:darkMode?'#9ca3af':'#6b7280',angle:-45,textAnchor:\"end\",height:80,interval:0,fontSize:12}),/*#__PURE__*/_jsx(YAxis,{stroke:darkMode?'#9ca3af':'#6b7280',label:{value:'Grind Level',angle:-90,position:'insideLeft'}}),/*#__PURE__*/_jsx(Tooltip,{content:_ref0=>{let{active,payload,label}=_ref0;if(active&&payload&&payload.length){return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(darkMode?'bg-gray-800 border-gray-600':'bg-white border-gray-200',\" p-3 rounded-lg shadow-lg border\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"\".concat(darkMode?'text-white':'text-gray-900',\" font-medium\"),children:label}),/*#__PURE__*/_jsxs(\"p\",{style:{color:payload[0].color},children:[\"Average Grind: \",payload[0].value]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[payload[0].payload.count,\" coffee\",payload[0].payload.count!==1?'s':'']})]});}return null;}}),/*#__PURE__*/_jsx(Bar,{dataKey:\"avgGrind\",fill:\"#8b4513\",radius:[4,4,0,0]})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"No grind data available\"})]})]}),selectedCoffeeForRadar&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4\",children:[\"Flavor Profile: \",selectedCoffeeForRadar.roaster,\" - \",selectedCoffeeForRadar.description]}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:600,children:/*#__PURE__*/_jsxs(RadarChart,{data:getRadarData(selectedCoffeeForRadar),margin:{top:50,right:50,bottom:50,left:50},children:[/*#__PURE__*/_jsx(PolarGrid,{stroke:darkMode?'#374151':'#e5e7eb'}),/*#__PURE__*/_jsx(PolarAngleAxis,{dataKey:\"taste\",stroke:darkMode?'#9ca3af':'#6b7280',fontSize:18,tick:{fill:darkMode?'#e5e7eb':'#374151'},className:\"font-medium\"}),/*#__PURE__*/_jsx(PolarRadiusAxis,{domain:[0,5],stroke:darkMode?'#9ca3af':'#6b7280',fontSize:16,tick:{fill:darkMode?'#9ca3af':'#6b7280'}}),/*#__PURE__*/_jsx(Radar,{name:\"Flavor Profile\",dataKey:\"value\",stroke:\"#f59e0b\",fill:\"#f59e0b\",fillOpacity:0.3,strokeWidth:3}),/*#__PURE__*/_jsx(Tooltip,{content:/*#__PURE__*/_jsx(CustomTooltip,{})})]})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(darkMode?'bg-gray-800 text-white':'bg-white',\" rounded-2xl shadow-xl p-6 mb-6 transition-colors\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"w-5 h-5 absolute left-3 top-3 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by roaster or description...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full pl-10 pr-4 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setFilterFavorites(!filterFavorites),className:\"px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors \".concat(filterFavorites?'bg-amber-600 text-white':darkMode?'bg-gray-700 text-gray-300 hover:bg-gray-600':'bg-gray-200 text-gray-700 hover:bg-gray-300'),children:[/*#__PURE__*/_jsx(Star,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Favorites\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>setSortBy(e.target.value),className:\"px-4 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\"),children:[/*#__PURE__*/_jsx(\"option\",{value:\"date\",children:\"Sort by Date\"}),/*#__PURE__*/_jsx(\"option\",{value:\"rating\",children:\"Sort by Rating\"}),/*#__PURE__*/_jsx(\"option\",{value:\"roaster\",children:\"Sort by Roaster\"}),/*#__PURE__*/_jsx(\"option\",{value:\"value\",children:\"Sort by Value (Best First)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"priceLowHigh\",children:\"Sort by Price (Low to High)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"priceHighLow\",children:\"Sort by Price (High to Low)\"})]})]})]})}),showAddForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(darkMode?'bg-gray-800 text-white':'bg-white',\" rounded-2xl shadow-xl p-6 mb-6 transition-colors\"),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6\",children:editingCoffee?'Edit Coffee':'Add New Coffee'}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Roaster\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:formData.roaster,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{roaster:e.target.value})),className:\"w-full px-3 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\")})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:formData.description,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{description:e.target.value})),className:\"w-full px-3 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-6\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:formData.favorite,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{favorite:e.target.checked})),className:\"rounded text-amber-600 focus:ring-amber-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700'),children:\"Favorite\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:formData.grinded,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{grinded:e.target.checked})),className:\"rounded text-amber-600 focus:ring-amber-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700'),children:\"Pre-grinded\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Roast Level\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.roastLevel,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{roastLevel:e.target.value})),className:\"w-full px-3 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\"),children:[/*#__PURE__*/_jsx(\"option\",{value:\"light\",children:\"Light\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium\",children:\"Medium\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium-dark\",children:\"Medium-Dark\"}),/*#__PURE__*/_jsx(\"option\",{value:\"dark\",children:\"Dark\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Your Brewing Method\"}),/*#__PURE__*/_jsx(\"select\",{value:formData.brewingMethod,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{brewingMethod:e.target.value})),className:\"w-full px-3 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\"),children:brewingMethods.map(method=>/*#__PURE__*/_jsxs(\"option\",{value:method.id,children:[method.icon,\" \",method.name]},method.id))}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1 \".concat(darkMode?'text-gray-400':'text-gray-500'),children:\"Your preferred brewing method\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Roaster's Recommended Method\"}),/*#__PURE__*/_jsx(\"select\",{value:formData.recommendedMethod,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{recommendedMethod:e.target.value})),className:\"w-full px-3 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\"),children:brewingMethods.map(method=>/*#__PURE__*/_jsxs(\"option\",{value:method.id,children:[method.icon,\" \",method.name]},method.id))}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1 \".concat(darkMode?'text-gray-400':'text-gray-500'),children:\"What the roaster suggests (check packaging/website)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Origin Countries\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"e.g. BR, CO, ET (Brazil, Colombia, Ethiopia)\",value:formData.origin,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{origin:e.target.value})),className:\"w-full px-3 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\")}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1 \".concat(darkMode?'text-gray-400':'text-gray-500'),children:\"Common codes: BR (Brazil), CO (Colombia), ET (Ethiopia), GT (Guatemala), CR (Costa Rica)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Grinder Level\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"e.g. 12, 15, 10\",value:formData.grindingDegree,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{grindingDegree:e.target.value})),className:\"w-full px-3 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Arabica %\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",max:\"100\",value:formData.percentArabica,onChange:e=>{const arabica=parseInt(e.target.value)||0;setFormData(_objectSpread(_objectSpread({},formData),{},{percentArabica:arabica,percentRobusta:Math.max(0,100-arabica)}));},className:\"w-full px-3 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\")})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Robusta %\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",max:\"100\",value:formData.percentRobusta,onChange:e=>{const robusta=parseInt(e.target.value)||0;setFormData(_objectSpread(_objectSpread({},formData),{},{percentRobusta:robusta,percentArabica:Math.max(0,100-robusta)}));},className:\"w-full px-3 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\")})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Crema Rating\"}),/*#__PURE__*/_jsx(StarRating,{rating:formData.cremaRating,onRatingChange:rating=>setFormData(_objectSpread(_objectSpread({},formData),{},{cremaRating:rating}))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Taste Notes\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"e.g. chocolate, nutty, fruity, earthy, sweet\",value:formData.tasteNotes,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{tasteNotes:e.target.value})),className:\"w-full px-3 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\")})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Product URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",placeholder:\"https://...\",value:formData.url,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{url:e.target.value})),className:\"w-full px-3 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\")})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Taste Rating\"}),/*#__PURE__*/_jsx(StarRating,{rating:formData.tasteRating,onRatingChange:rating=>setFormData(_objectSpread(_objectSpread({},formData),{},{tasteRating:rating}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",placeholder:\"e.g. 12.50\",value:formData.price,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{price:e.target.value})),className:\"w-full px-3 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\")})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Package Size (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"1000\",value:formData.packageSize,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{packageSize:parseInt(e.target.value)||1000})),className:\"w-full px-3 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\")})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Currency\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.currency,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{currency:e.target.value})),className:\"w-full px-3 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\"),children:[/*#__PURE__*/_jsx(\"option\",{value:\"EUR\",children:\"EUR \\u20AC\"}),/*#__PURE__*/_jsx(\"option\",{value:\"USD\",children:\"USD $\"}),/*#__PURE__*/_jsx(\"option\",{value:\"GBP\",children:\"GBP \\xA3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"CHF\",children:\"CHF \\u20A3\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Preparation Notes\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.preparationNotes,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{preparationNotes:e.target.value})),placeholder:\"e.g. 'Pure espresso', 'Americano style + extra sieve', 'Double shot'\",className:\"w-full px-3 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\")}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1 \".concat(darkMode?'text-gray-400':'text-gray-500'),children:\"How you prepared this coffee when rating it\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Coffee Group (Optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.coffeeGroup,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{coffeeGroup:e.target.value})),placeholder:\"Leave empty for auto-grouping\",className:\"w-full px-3 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\")}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1 \".concat(darkMode?'text-gray-400':'text-gray-500'),children:\"Groups related coffees together (auto-generated when copying)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-2\"),children:\"Comment\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.comment,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{comment:e.target.value})),rows:\"3\",placeholder:\"Additional notes, brewing tips, personal thoughts...\",className:\"w-full px-3 py-2 border \".concat(darkMode?'bg-gray-700 border-gray-600 text-white':'border-gray-300',\" rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2 flex space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"bg-amber-600 hover:bg-amber-700 text-white px-6 py-2 rounded-lg transition-colors\",children:editingCoffee?'Update Coffee':'Add Coffee'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowAddForm(false);setEditingCoffee(null);resetForm();},className:\"\".concat(darkMode?'bg-gray-700 hover:bg-gray-600 text-white':'bg-gray-300 hover:bg-gray-400 text-gray-700',\" px-6 py-2 rounded-lg transition-colors\"),children:\"Cancel\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-8\",children:(()=>{// First group by roaster, then by coffeeGroup for variations\nconst roasterGroups=filteredCoffees.reduce((roasters,coffee)=>{const roaster=coffee.roaster.split(' - ')[0]||coffee.roaster;// Get main roaster name\nif(!roasters[roaster])roasters[roaster]=[];roasters[roaster].push(coffee);return roasters;},{});// Sort roasters: favorites first, then alphabetically\nconst sortedRoasters=Object.entries(roasterGroups).sort((_ref1,_ref10)=>{let[roasterA,coffeesA]=_ref1;let[roasterB,coffeesB]=_ref10;const avgRatingA=coffeesA.reduce((sum,c)=>sum+c.tasteRating,0)/coffeesA.length;const avgRatingB=coffeesB.reduce((sum,c)=>sum+c.tasteRating,0)/coffeesB.length;const favCountA=coffeesA.filter(c=>c.favorite).length;const favCountB=coffeesB.filter(c=>c.favorite).length;// Sort by: 1) favorites count, 2) average rating, 3) alphabetically\nif(favCountA!==favCountB)return favCountB-favCountA;if(Math.abs(avgRatingA-avgRatingB)>0.1)return avgRatingB-avgRatingA;return roasterA.localeCompare(roasterB);});return sortedRoasters.map(_ref11=>{let[roasterName,roasterCoffees]=_ref11;// Group coffees within this roaster by coffeeGroup for variations\nconst groupedCoffees=roasterCoffees.reduce((groups,coffee)=>{const group=coffee.coffeeGroup||\"individual-\".concat(coffee.id);if(!groups[group])groups[group]=[];groups[group].push(coffee);return groups;},{});const avgRating=roasterCoffees.reduce((sum,c)=>sum+c.tasteRating,0)/roasterCoffees.length;const favoriteCount=roasterCoffees.filter(c=>c.favorite).length;const isCollapsed=collapsedRoasters[roasterName];return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(darkMode?'bg-gray-700 hover:bg-gray-600':'bg-gradient-to-r from-amber-100 to-orange-100 hover:from-amber-200 hover:to-orange-200',\" rounded-xl p-4 border-l-4 border-amber-500 cursor-pointer transition-colors\"),onClick:()=>toggleRoasterCollapse(roasterName),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[isCollapsed?/*#__PURE__*/_jsx(ChevronDown,{className:\"w-5 h-5 \".concat(darkMode?'text-gray-300':'text-gray-600')}):/*#__PURE__*/_jsx(ChevronUp,{className:\"w-5 h-5 \".concat(darkMode?'text-gray-300':'text-gray-600')}),/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold \".concat(darkMode?'text-white':'text-gray-800'),children:[\"\\u2615 \",roasterName]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm px-3 py-1 rounded-full font-medium \".concat(darkMode?'bg-gray-600 text-gray-200':'bg-white text-gray-700'),children:[roasterCoffees.length,\" coffee\",roasterCoffees.length!==1?'s':'']}),favoriteCount>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm px-3 py-1 rounded-full font-medium \".concat(darkMode?'bg-yellow-900 text-yellow-100':'bg-yellow-100 text-yellow-800'),children:[\"\\u2B50 \",favoriteCount,\" favorite\",favoriteCount!==1?'s':'']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm \".concat(darkMode?'text-gray-300':'text-gray-600'),children:\"Avg Rating:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(StarRating,{rating:Math.round(avgRating),readOnly:true,size:\"small\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-1 text-sm font-semibold \".concat(darkMode?'text-gray-200':'text-gray-700'),children:avgRating.toFixed(1)})]})]})]})}),!isCollapsed&&/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-6 ml-4\",children:Object.entries(groupedCoffees).map(_ref12=>{let[groupId,coffees]=_ref12;const isGrouped=coffees.length>1&&!groupId.startsWith('individual-');const mainCoffee=coffees[0];// Use first coffee for shared information\nif(isGrouped){// Grouped coffee display: main card + variation sub-cards\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(darkMode?'bg-gray-800 text-white':'bg-white',\" rounded-2xl shadow-xl p-6 border-l-4 border-blue-500\"),children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold\",children:mainCoffee.roaster}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs px-2 py-1 rounded-full font-medium \".concat(darkMode?'bg-blue-900 text-blue-100':'bg-blue-100 text-blue-800'),children:[\"\\uD83D\\uDCCA \",coffees.length,\" preparations\"]}),mainCoffee.roastLevel&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-1 rounded-full font-medium \".concat(getRoastBadge(mainCoffee.roastLevel).bg,\" \").concat(getRoastBadge(mainCoffee.roastLevel).text),children:getRoastBadge(mainCoffee.roastLevel).label})]}),/*#__PURE__*/_jsx(\"p\",{className:\"\".concat(darkMode?'text-gray-300':'text-gray-600',\" mb-4\"),children:mainCoffee.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Percent,{className:\"w-4 h-4 text-gray-500\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm\",children:[mainCoffee.percentArabica,\"% Arabica / \",mainCoffee.percentRobusta,\"% Robusta\"]})]}),mainCoffee.grindingDegree&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded\",children:[\"Grinder Level: \",mainCoffee.grindingDegree]})}),mainCoffee.price&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs bg-green-100 text-green-800 px-2 py-1 rounded\",children:[mainCoffee.price,\" \",mainCoffee.currency||'EUR',\" / \",mainCoffee.packageSize||1000,\"g\"]})})]}),mainCoffee.origin&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap items-center gap-1\",children:mainCoffee.origin.split(',').map(code=>{const trimmedCode=code.trim();const country=countryFlags[trimmedCode];const isRegion=['AS','LA','SA'].includes(trimmedCode);return/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center\",title:country?country.name:trimmedCode,children:country&&!isRegion?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl\",children:country.flag}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs ml-1\",children:trimmedCode})]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-xs bg-green-100 text-green-800 px-2 py-1 rounded\",children:country?country.name:trimmedCode})},code);})})}),mainCoffee.price&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:(()=>{const cost=calculateCostPerCup(mainCoffee);return cost&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"\".concat(darkMode?'text-gray-400':'text-gray-600'),children:\"Cost per cup: \"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-green-600\",children:[cost.costPerCup,\" \",cost.currency]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"\".concat(darkMode?'text-gray-400':'text-gray-600'),children:\"Price per kg: \"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold\",children:[cost.pricePerKg,\" \",cost.currency]})]})]});})()}),(mainCoffee.comment||mainCoffee.url)&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[mainCoffee.url&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(ExternalLink,{className:\"w-4 h-4 text-blue-600\"}),/*#__PURE__*/_jsx(\"a\",{href:mainCoffee.url,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-sm text-blue-600 hover:text-blue-800 underline\",children:\"View Product Online\"})]}),mainCoffee.comment&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(darkMode?'text-gray-400':'text-gray-600',\" italic\"),children:mainCoffee.comment})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid md:grid-cols-2 gap-4 ml-6\",children:coffees.map(coffee=>{var _coffee$preparationNo;return/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(darkMode?'bg-gray-700 text-white':'bg-gray-50',\" rounded-xl shadow-md p-4 border-l-4 \").concat((_coffee$preparationNo=coffee.preparationNotes)!==null&&_coffee$preparationNo!==void 0&&_coffee$preparationNo.includes('Pure espresso')?'border-amber-500':'border-green-500'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-3\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-semibold\",children:[\"Preparation #\",coffees.indexOf(coffee)+1]}),coffee.favorite&&/*#__PURE__*/_jsx(Star,{className:\"w-4 h-4 text-yellow-400 fill-yellow-400\"})]}),coffee.preparationNotes&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700'),children:\"Method: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm \".concat(darkMode?'text-gray-400':'text-gray-600',\" italic\"),children:coffee.preparationNotes})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs \".concat(darkMode?'text-gray-400':'text-gray-500',\" block mb-1\"),children:\"Crema\"}),/*#__PURE__*/_jsx(StarRating,{rating:coffee.cremaRating,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs \".concat(darkMode?'text-gray-400':'text-gray-500',\" block mb-1\"),children:\"Taste\"}),/*#__PURE__*/_jsx(StarRating,{rating:coffee.tasteRating,readOnly:true})]})]}),(()=>{const valueScore=calculateValueScore(coffee);return valueScore&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs px-2 py-1 rounded \".concat(darkMode?'bg-amber-900 text-amber-100':'bg-amber-100 text-amber-800'),title:\"Value Score: Taste Rating \\xF7 Cost per Cup. Higher = Better Value!\",children:[\"Value: \",valueScore]})});})(),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[\"Tasted: \",new Date(coffee.cuppingTime).toLocaleDateString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-1 ml-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(coffee),className:\"p-1.5 \".concat(darkMode?'text-gray-400 hover:text-amber-400 hover:bg-gray-600':'text-gray-600 hover:text-amber-600 hover:bg-amber-50',\" rounded transition-colors\"),title:\"Edit preparation\",children:/*#__PURE__*/_jsx(Edit3,{className:\"w-3 h-3\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCopy(coffee),className:\"p-1.5 \".concat(darkMode?'text-gray-400 hover:text-blue-400 hover:bg-gray-600':'text-gray-600 hover:text-blue-600 hover:bg-blue-50',\" rounded transition-colors\"),title:\"Copy for new preparation\",children:/*#__PURE__*/_jsx(Copy,{className:\"w-3 h-3\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(coffee.id),className:\"p-1.5 \".concat(darkMode?'text-gray-400 hover:text-red-400 hover:bg-gray-600':'text-gray-600 hover:text-red-600 hover:bg-red-50',\" rounded transition-colors\"),title:\"Delete preparation\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-3 h-3\"})})]})]})},coffee.id);})})]},groupId);}else{var _brewingMethods$find,_brewingMethods$find2,_brewingMethods$find3,_brewingMethods$find4;// Individual coffee display (unchanged)\nconst coffee=mainCoffee;return/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(darkMode?'bg-gray-800 text-white':'bg-white',\" rounded-2xl shadow-xl p-6 hover:shadow-2xl transition-all\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold\",children:coffee.roaster}),coffee.favorite&&/*#__PURE__*/_jsx(Star,{className:\"w-5 h-5 text-yellow-400 fill-yellow-400\"}),coffee.roastLevel&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-1 rounded-full font-medium \".concat(getRoastBadge(coffee.roastLevel).bg,\" \").concat(getRoastBadge(coffee.roastLevel).text),children:getRoastBadge(coffee.roastLevel).label}),coffee.brewingMethod&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs px-2 py-1 rounded-full font-medium \".concat(darkMode?'bg-blue-900 text-blue-100':'bg-blue-100 text-blue-800'),title:\"Your preferred method\",children:[\"\\uD83D\\uDC64 \",(_brewingMethods$find=brewingMethods.find(m=>m.id===coffee.brewingMethod))===null||_brewingMethods$find===void 0?void 0:_brewingMethods$find.icon,\" \",((_brewingMethods$find2=brewingMethods.find(m=>m.id===coffee.brewingMethod))===null||_brewingMethods$find2===void 0?void 0:_brewingMethods$find2.name)||coffee.brewingMethod]}),coffee.recommendedMethod&&coffee.recommendedMethod!==coffee.brewingMethod&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs px-2 py-1 rounded-full font-medium \".concat(darkMode?'bg-green-900 text-green-100':'bg-green-100 text-green-800'),title:\"Roaster's recommendation\",children:[\"\\uD83C\\uDFEA \",(_brewingMethods$find3=brewingMethods.find(m=>m.id===coffee.recommendedMethod))===null||_brewingMethods$find3===void 0?void 0:_brewingMethods$find3.icon,\" \",((_brewingMethods$find4=brewingMethods.find(m=>m.id===coffee.recommendedMethod))===null||_brewingMethods$find4===void 0?void 0:_brewingMethods$find4.name)||coffee.recommendedMethod]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"\".concat(darkMode?'text-gray-300':'text-gray-600',\" mb-4\"),children:coffee.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Percent,{className:\"w-4 h-4 text-gray-500\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm\",children:[coffee.percentArabica,\"% Arabica / \",coffee.percentRobusta,\"% Robusta\"]})]}),coffee.grindingDegree&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded\",children:[\"Grinder Level: \",coffee.grindingDegree]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 text-gray-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:new Date(coffee.cuppingTime).toLocaleDateString()})]}),coffee.price&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs bg-green-100 text-green-800 px-2 py-1 rounded\",children:[coffee.price,\" \",coffee.currency||'EUR',\" / \",coffee.packageSize||1000,\"g\"]})})]}),coffee.origin&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap items-center gap-1\",children:coffee.origin.split(',').map(code=>{const trimmedCode=code.trim();const country=countryFlags[trimmedCode];const isRegion=['AS','LA','SA'].includes(trimmedCode);return/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center\",title:country?country.name:trimmedCode,children:country&&!isRegion?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl\",children:country.flag}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs ml-1\",children:trimmedCode})]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-xs bg-green-100 text-green-800 px-2 py-1 rounded\",children:country?country.name:trimmedCode})},code);})})}),coffee.tasteNotes&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700'),children:\"Taste: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm \".concat(darkMode?'text-gray-400':'text-gray-600'),children:coffee.tasteNotes}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedCoffeeForRadar(coffee),className:\"ml-2 text-amber-600 hover:text-amber-700 text-sm\",title:\"Show flavor profile\",children:/*#__PURE__*/_jsx(BarChart3,{className:\"w-4 h-4 inline\"})})]}),coffee.preparationNotes&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700'),children:\"Preparation: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm \".concat(darkMode?'text-gray-400':'text-gray-600',\" italic\"),children:coffee.preparationNotes})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-6 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm \".concat(darkMode?'text-gray-400':'text-gray-500',\" block\"),children:\"Crema\"}),/*#__PURE__*/_jsx(StarRating,{rating:coffee.cremaRating,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm \".concat(darkMode?'text-gray-400':'text-gray-500',\" block\"),children:\"Taste\"}),/*#__PURE__*/_jsx(StarRating,{rating:coffee.tasteRating,readOnly:true})]}),(()=>{const cost=calculateCostPerCup(coffee);const valueScore=calculateValueScore(coffee);return cost&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm \".concat(darkMode?'text-gray-400':'text-gray-500',\" block\"),children:\"Cost/Cup\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-bold text-green-600\",children:[cost.costPerCup,\" \",cost.currency]}),valueScore&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs px-2 py-1 rounded \".concat(darkMode?'bg-amber-900 text-amber-100':'bg-amber-100 text-amber-800'),title:\"Value Score: Taste Rating \\xF7 Cost per Cup. Higher = Better Value!\",children:[\"Value: \",valueScore]})]})]});})()]}),(coffee.comment||coffee.url)&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[coffee.url&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(ExternalLink,{className:\"w-4 h-4 text-blue-600\"}),/*#__PURE__*/_jsx(\"a\",{href:coffee.url,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-sm text-blue-600 hover:text-blue-800 underline\",children:\"View Product Online\"})]}),coffee.comment&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(darkMode?'text-gray-400':'text-gray-600',\" italic\"),children:coffee.comment})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-2 ml-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(coffee),className:\"p-2 \".concat(darkMode?'text-gray-400 hover:text-amber-400 hover:bg-gray-700':'text-gray-600 hover:text-amber-600 hover:bg-amber-50',\" rounded-lg transition-colors\"),title:\"Edit coffee\",children:/*#__PURE__*/_jsx(Edit3,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCopy(coffee),className:\"p-2 \".concat(darkMode?'text-gray-400 hover:text-blue-400 hover:bg-gray-700':'text-gray-600 hover:text-blue-600 hover:bg-blue-50',\" rounded-lg transition-colors\"),title:\"Copy for different preparation\",children:/*#__PURE__*/_jsx(Copy,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(coffee.id),className:\"p-2 \".concat(darkMode?'text-gray-400 hover:text-red-400 hover:bg-gray-700':'text-gray-600 hover:text-red-600 hover:bg-red-50',\" rounded-lg transition-colors\"),title:\"Delete coffee\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]})]})},coffee.id);}})})]},roasterName);});})()}),filteredCoffees.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(darkMode?'bg-gray-800':'bg-white',\" rounded-2xl shadow-xl p-12 text-center\"),children:[/*#__PURE__*/_jsx(Coffee,{className:\"w-16 h-16 \".concat(darkMode?'text-gray-600':'text-gray-300',\" mx-auto mb-4\")}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold \".concat(darkMode?'text-gray-300':'text-gray-600',\" mb-2\"),children:\"No coffees found\"}),/*#__PURE__*/_jsx(\"p\",{className:darkMode?'text-gray-400':'text-gray-500',children:searchTerm||filterFavorites?'Try adjusting your search or filters':'Add your first coffee to get started!'})]})]})});};export default CoffeeTracker;","map":{"version":3,"names":["React","useState","useEffect","useRef","Plus","Coffee","Star","Search","Trash2","Edit3","Calendar","Percent","ExternalLink","BarChart3","Moon","Sun","Download","Upload","FileText","RefreshCw","RotateCcw","Copy","ChevronDown","ChevronUp","LineChart","Line","BarChart","Bar","RadarChart","PolarGrid","PolarAngleAxis","PolarRadiusAxis","Radar","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","PieChart","Pie","Cell","jsPDF","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CoffeeTracker","coffees","setCoffees","showAddForm","setShowAddForm","editingCoffee","setEditingCoffee","searchTerm","setSearchTerm","filterFavorites","setFilterFavorites","sortBy","setSortBy","darkMode","setDarkMode","showAnalytics","setShowAnalytics","selectedCoffeeForRadar","setSelectedCoffeeForRadar","collapsedRoasters","setCollapsedRoasters","saved","localStorage","getItem","JSON","parse","fileInputRef","brewingMethods","id","name","icon","defaultCoffees","Date","DATA_VERSION","loadedData","loadedVersion","parsedData","coffeesWithDates","map","coffee","_objectSpread","cuppingTime","console","log","error","setItem","savedDarkMode","length","stringify","toISOString","alert","toggleRoasterCollapse","roasterName","prev","countryFlags","flag","getRoastBadge","level","bg","text","label","parseTasteProfile","tasteNotes","profile","chocolate","nutty","fruity","floral","earthy","spicy","sweet","acidic","notes","toLowerCase","includes","Math","max","calculateCostPerCup","price","packageSize","pricePerGram","parseFloat","gramsPerCup","brewingMethod","costPerCup","toFixed","pricePerKg","currency","calculateValueScore","cost","tasteRating","valueScore","getAnalyticsData","roasterCounts","reduce","acc","roaster","split","trim","roasterData","Object","entries","_ref","count","sort","a","b","slice","totalCoffees","avgArabica","sum","c","percentArabica","avgRobusta","blendData","value","round","fill","ratingTrends","index","date","toLocaleDateString","month","year","rating","crema","cremaRating","roastLevelCounts","roastLevel","roastLevelData","_ref2","charAt","toUpperCase","originCounts","origin","countries","forEach","country","originData","_ref3","_countryFlags$code","_countryFlags$code2","code","grindByBrand","filter","grindingDegree","isNaN","parseInt","brand","grind","total","grinds","push","grindByBrandData","_ref4","data","avgGrind","minGrind","min","maxGrind","coffeesWithPrice","priceAnalysis","description","avgCostPerCup","formData","setFormData","favorite","grinded","grindingTime","percentRobusta","url","comment","recommendedMethod","preparationNotes","coffeeGroup","resetForm","handleSubmit","newCoffee","now","handleEdit","handleDelete","handleCopy","concat","replace","updatedCoffees","handleExport","dataToExport","version","exportDate","jsonString","blob","Blob","type","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","handlePDFExport","doc","pageHeight","internal","pageSize","height","yPosition","setFontSize","setFont","undefined","avgRating","sortedCoffees","addPage","stars","repeat","method","find","m","recMethod","origins","join","maxWidth","lines","splitTextToSize","line","totalPages","getNumberOfPages","i","setPage","width","save","handleResetToDefaults","storageInfo","getStorageInfo","confirmText","userInput","prompt","sizeKB","window","confirm","removeItem","handleForceRefresh","migratedData","lastSaved","size","toLocaleString","coffeeCount","handleImport","event","file","target","files","reader","FileReader","onload","e","importedData","result","Array","isArray","importedCoffees","random","shouldReplace","maxId","mergedCoffees","readAsText","filteredCoffees","matchesSearch","matchesFavorite","localeCompare","costA","costB","costA2","costB2","valueA","valueB","StarRating","_ref5","onRatingChange","readOnly","sizeClass","className","children","star","onClick","getRadarData","_ref6","taste","analytics","CustomTooltip","_ref7","active","payload","entry","style","color","dataKey","title","_fileInputRef$current","current","ref","accept","onChange","margin","top","right","left","bottom","strokeDasharray","stroke","angle","textAnchor","interval","fontSize","content","radius","cx","cy","labelLine","outerRadius","verticalAlign","formatter","floor","domain","strokeWidth","dot","r","_ref8","position","_ref9","_ref0","tick","fillOpacity","placeholder","required","checked","arabica","robusta","step","rows","roasterGroups","roasters","sortedRoasters","_ref1","_ref10","roasterA","coffeesA","roasterB","coffeesB","avgRatingA","avgRatingB","favCountA","favCountB","abs","_ref11","roasterCoffees","groupedCoffees","groups","group","favoriteCount","isCollapsed","_ref12","groupId","isGrouped","startsWith","mainCoffee","trimmedCode","isRegion","rel","_coffee$preparationNo","indexOf","_brewingMethods$find","_brewingMethods$find2","_brewingMethods$find3","_brewingMethods$find4"],"sources":["/home/miraculix/coffee-tracker/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Plus, Coffee, Star, Search, Trash2, Edit3, Calendar, Percent, ExternalLink, BarChart3, Moon, Sun, Download, Upload, FileText, RefreshCw, RotateCcw, Copy, ChevronDown, ChevronUp } from 'lucide-react';\nimport { LineChart, Line, BarChart, Bar, RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, Radar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, PieChart, Pie, Cell } from 'recharts';\nimport jsPDF from 'jspdf';\n\nconst CoffeeTracker = () => {\n  const [coffees, setCoffees] = useState([]);\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [editingCoffee, setEditingCoffee] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterFavorites, setFilterFavorites] = useState(false);\n  const [sortBy, setSortBy] = useState('date');\n  const [darkMode, setDarkMode] = useState(true);\n  const [showAnalytics, setShowAnalytics] = useState(false);\n  const [selectedCoffeeForRadar, setSelectedCoffeeForRadar] = useState(null);\n  const [collapsedRoasters, setCollapsedRoasters] = useState(() => {\n    const saved = localStorage.getItem('collapsedRoasters');\n    return saved ? JSON.parse(saved) : {};\n  });\n  const fileInputRef = useRef(null);\n\n  // Brewing methods\n  const brewingMethods = [\n    { id: 'espresso', name: 'Espresso/Portafilter (SiebtrÃ¤ger)', icon: 'â˜•' },\n    { id: 'v60', name: 'V60 Pour Over', icon: 'ðŸ”»' },\n    { id: 'chemex', name: 'Chemex', icon: 'â³' },\n    { id: 'frenchpress', name: 'French Press', icon: 'ðŸ«–' },\n    { id: 'aeropress', name: 'AeroPress', icon: 'ðŸ’‰' },\n    { id: 'moka', name: 'Moka Pot', icon: 'ðŸ«—' },\n    { id: 'dripper', name: 'Dripper', icon: 'â˜•' },\n    { id: 'filter', name: 'Filter Coffee', icon: 'ðŸ“„' }\n  ];\n\n  // Default sample data\n  const defaultCoffees = [\n      {\n        \"id\": 17,\n        \"roaster\": \"DieRÃ¶ster - Suchan Bologna\",\n        \"description\": \"Leicht fruchtig, schokoladig\",\n        \"favorite\": true,\n        \"grinded\": false,\n        \"grindingTime\": \"\",\n        \"grindingDegree\": \"12\",\n        \"percentArabica\": 90,\n        \"percentRobusta\": 10,\n        \"cuppingTime\": new Date(\"2023-06-10 14:32:49\"),\n        \"cremaRating\": 3,\n        \"tasteRating\": 3,\n        \"tasteNotes\": \"light fruity, chocolate, balanced, bitter chocolate notes\",\n        \"url\": \"https://www.dieroester.at/roester/suchan/bologna\",\n        \"comment\": \"90/10 Mischung aus Brasilien, Indien, Ã„thiopien, Nicaragua\",\n        \"origin\": \"BR,IN,ET,NI\",\n        \"roastLevel\": \"medium-dark\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"43.20\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\",\n        \"preparationNotes\": \"Pure espresso\",\n        \"recommendedMethod\": \"espresso\"\n      },\n      {\n        \"id\": 11,\n        \"roaster\": \"DieRÃ¶ster - Suchan Palermo\",\n        \"description\": \"schokoladig nussig holzig\",\n        \"favorite\": true,\n        \"grinded\": false,\n        \"grindingTime\": \"\",\n        \"grindingDegree\": \"15\",\n        \"percentArabica\": 100,\n        \"percentRobusta\": 0,\n        \"cuppingTime\": new Date(\"2023-03-15 21:48:47\"),\n        \"cremaRating\": 5,\n        \"tasteRating\": 5,\n        \"tasteNotes\": \"nutty, woody, chocolate, very low acidity\",\n        \"url\": \"https://www.dieroester.at/roester/suchan/palermo\",\n        \"comment\": \"Parade-Espresso fÃ¼r Leute, die viel Aroma und wenig SÃ¤ure mÃ¶chten\",\n        \"origin\": \"IT\",\n        \"roastLevel\": \"dark\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"45.60\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\",\n        \"preparationNotes\": \"Pure espresso\",\n        \"recommendedMethod\": \"espresso\"\n      },\n      {\n        \"id\": 20,\n        \"roaster\": \"Lavazza\",\n        \"description\": \"Barista intenso\",\n        \"favorite\": true,\n        \"grinded\": false,\n        \"grindingTime\": \"\",\n        \"grindingDegree\": \"10\",\n        \"percentArabica\": 50,\n        \"percentRobusta\": 50,\n        \"cuppingTime\": new Date(\"2024-01-10 19:03:35\"),\n        \"cremaRating\": 5,\n        \"tasteRating\": 5,\n        \"tasteNotes\": \"cocoa, wood, hazelnut, full body, intense aftertaste\",\n        \"url\": \"https://www.lavazza.com/en/coffee-beans/espresso-barista-intenso\",\n        \"comment\": \"Intensity 9/10, perfect for espresso and moka\",\n        \"origin\": \"BR,AS\",\n        \"roastLevel\": \"dark\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"19.99\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\",\n        \"preparationNotes\": \"Pure espresso\",\n        \"recommendedMethod\": \"espresso\"\n      },\n      {\n        \"id\": 19,\n        \"roaster\": \"Lavazza\",\n        \"description\": \"Espresso Italiano Cremoso\",\n        \"favorite\": true,\n        \"grinded\": false,\n        \"grindingTime\": \"\",\n        \"grindingDegree\": \"9\",\n        \"percentArabica\": 30,\n        \"percentRobusta\": 70,\n        \"cuppingTime\": new Date(\"2023-10-15 12:29:58\"),\n        \"cremaRating\": 5,\n        \"tasteRating\": 5,\n        \"tasteNotes\": \"chocolate, spices, cocoa, long-lasting crema\",\n        \"url\": \"https://www.lavazza.com/en/coffee/coffee-beans/espresso-cremoso-1-kg.html\",\n        \"comment\": \"RÃ¶stgrad mittel, Intensity 8/10, from Latin America and Southeast Asia\",\n        \"origin\": \"LA,AS\",\n        \"roastLevel\": \"medium\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"16.49\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\",\n        \"preparationNotes\": \"Pure espresso\",\n        \"recommendedMethod\": \"espresso\"\n      },\n      {\n        \"id\": 21,\n        \"roaster\": \"Lavazza\",\n        \"description\": \"Gran Cremoso\",\n        \"favorite\": true,\n        \"grinded\": false,\n        \"grindingTime\": \"\",\n        \"grindingDegree\": \"19\",\n        \"percentArabica\": 70,\n        \"percentRobusta\": 30,\n        \"cuppingTime\": new Date(\"2024-03-23 07:41:56\"),\n        \"cremaRating\": 4,\n        \"tasteRating\": 4,\n        \"tasteNotes\": \"chocolate, dried fruits, balanced, well-rounded\",\n        \"url\": \"https://www.lavazza.com\",\n        \"comment\": \"South America and Southeast Asia blend\",\n        \"origin\": \"SA,AS\",\n        \"roastLevel\": \"medium\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"26.99\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\",\n        \"preparationNotes\": \"Pure espresso\",\n        \"recommendedMethod\": \"espresso\"\n      },\n      {\n        \"id\": 9,\n        \"roaster\": \"220 Grad\",\n        \"description\": \"Guatemala La Labor\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"\",\n        \"grindingDegree\": \"15\",\n        \"percentArabica\": 100,\n        \"percentRobusta\": 0,\n        \"cuppingTime\": new Date(\"2020-07-11 18:02:56\"),\n        \"cremaRating\": 4,\n        \"tasteRating\": 4,\n        \"tasteNotes\": \"almonds, pecans, dried fruits, milk chocolate, lively acidity\",\n        \"url\": \"https://www.220grad.com/produkt/guatemala-la-labor-espresso-roestung/\",\n        \"comment\": \"Red Bourbon variety, Finca La Labor, 1520m altitude\",\n        \"origin\": \"GT\",\n        \"roastLevel\": \"medium\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"v60\",\n        \"price\": \"38.30\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\",\n        \"preparationNotes\": \"Pure espresso\"\n      },\n      {\n        \"id\": 18,\n        \"roaster\": \"220 Grad\",\n        \"description\": \"Guatemala Single Region Robusta\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"\",\n        \"grindingDegree\": \"5\",\n        \"percentArabica\": 0,\n        \"percentRobusta\": 100,\n        \"cuppingTime\": new Date(\"2023-08-18 08:14:24\"),\n        \"cremaRating\": 5,\n        \"tasteRating\": 3,\n        \"tasteNotes\": \"creamy, sweet grain, hazelnut, walnut, dark caramel, cinnamon, lemongrass\",\n        \"url\": \"https://www.220grad.com/produkt/guatemala-robusta/\",\n        \"comment\": \"Finca Santa Isabel, biodynamic cultivation, 1400m altitude\",\n        \"origin\": \"GT\",\n        \"roastLevel\": \"medium-dark\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"34.20\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\"\n      },\n      {\n        \"id\": 8,\n        \"roaster\": \"220 Grad\",\n        \"description\": \"Selektion Eins\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"2,8\",\n        \"grindingDegree\": \"3\",\n        \"percentArabica\": 100,\n        \"percentRobusta\": 0,\n        \"cuppingTime\": new Date(\"2020-05-12 13:08:43\"),\n        \"cremaRating\": 3,\n        \"tasteRating\": 3,\n        \"tasteNotes\": \"\",\n        \"url\": \"https://www.220grad.com\",\n        \"comment\": \"\",\n        \"origin\": \"\",\n        \"roastLevel\": \"medium\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"39.20\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\"\n      },\n      {\n        \"id\": 12,\n        \"roaster\": \"Bohnendealer - Amicizia Espresso\",\n        \"description\": \"schokoladig nussig krÃ¤ftig samtig\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"\",\n        \"grindingDegree\": \"18\",\n        \"percentArabica\": 26,\n        \"percentRobusta\": 74,\n        \"cuppingTime\": new Date(\"2023-04-07 20:07:06\"),\n        \"cremaRating\": 3,\n        \"tasteRating\": 3,\n        \"tasteNotes\": \"dark chocolate, spicy, full-bodied, velvety, no acidity\",\n        \"url\": \"https://www.bohnendealer.coffee/collections/coffee/products/amicizia-espresso\",\n        \"comment\": \"Neapolitan dark roast from 7 origins: India, Uganda, Costa Rica, Colombia, El Salvador, Brazil, Ethiopia\",\n        \"origin\": \"IN,UG,CR,CO,SV,BR,ET\",\n        \"roastLevel\": \"dark\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"31.90\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\"\n      },\n      {\n        \"id\": 14,\n        \"roaster\": \"Bohnendealer - Malabar\",\n        \"description\": \"schokoladig nussig mild samtig\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"\",\n        \"grindingDegree\": \"11\",\n        \"percentArabica\": 100,\n        \"percentRobusta\": 0,\n        \"cuppingTime\": new Date(\"2023-05-07 09:02:11\"),\n        \"cremaRating\": 1,\n        \"tasteRating\": 1,\n        \"tasteNotes\": \"chocolate, nutty, sweet, monsoon processed\",\n        \"url\": \"https://www.bohnendealer.coffee/products/monsooned-malabar-espresso\",\n        \"comment\": \"Monsooned process creates unique flavor\",\n        \"origin\": \"IN\",\n        \"roastLevel\": \"medium\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"33.80\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\"\n      },\n      {\n        \"id\": 13,\n        \"roaster\": \"Bohnendealer - Paris\",\n        \"description\": \"dunkel wÃ¼rzig rassig krÃ¤frig\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"\",\n        \"grindingDegree\": \"11\",\n        \"percentArabica\": 60,\n        \"percentRobusta\": 40,\n        \"cuppingTime\": new Date(\"2023-04-07 20:17:36\"),\n        \"cremaRating\": 2.5,\n        \"tasteRating\": 2.5,\n        \"tasteNotes\": \"dark, spicy, chocolate notes, full body\",\n        \"url\": \"https://www.bohnendealer.coffee/products/paris-espresso-premium-slow-roast-kaffee\",\n        \"comment\": \"French roast style, from Ecuador, Ethiopia and India\",\n        \"origin\": \"EC,ET,IN\",\n        \"roastLevel\": \"dark\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"31.90\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\"\n      },\n      {\n        \"id\": 15,\n        \"roaster\": \"Bohnendealer - Siena\",\n        \"description\": \"dunkel schokoladig krÃ¤ftig\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"\",\n        \"grindingDegree\": \"13\",\n        \"percentArabica\": 100,\n        \"percentRobusta\": 0,\n        \"cuppingTime\": new Date(\"2023-05-14 10:41:28\"),\n        \"cremaRating\": 3,\n        \"tasteRating\": 3,\n        \"tasteNotes\": \"dark chocolate, Italian style, traditional\",\n        \"url\": \"https://www.bohnendealer.coffee/products/siena-espresso\",\n        \"comment\": \"Hommage to Italian coffee culture\",\n        \"origin\": \"IT\",\n        \"roastLevel\": \"dark\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"31.90\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\"\n      },\n      {\n        \"id\": 3,\n        \"roaster\": \"Dallmayr\",\n        \"description\": \"Caffe Crema Perfetto\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"\",\n        \"grindingDegree\": \"7\",\n        \"percentArabica\": 70,\n        \"percentRobusta\": 30,\n        \"cuppingTime\": new Date(\"2019-05-29 14:30:01\"),\n        \"cremaRating\": 0,\n        \"tasteRating\": 0,\n        \"comment\": \"\",\n        \"origin\": \"\",\n        \"roastLevel\": \"medium\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"18.48\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\"\n      },\n      {\n        \"id\": 2,\n        \"roaster\": \"Dallmayr\",\n        \"description\": \"d'Oro Intensa\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"3\",\n        \"grindingDegree\": \"3\",\n        \"percentArabica\": 100,\n        \"percentRobusta\": 0,\n        \"cuppingTime\": new Date(\"2019-04-10 14:04:36\"),\n        \"cremaRating\": 5,\n        \"tasteRating\": 4,\n        \"comment\": \"sehr stark\",\n        \"origin\": \"\",\n        \"roastLevel\": \"dark\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"15.49\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\"\n      },\n      {\n        \"id\": 4,\n        \"roaster\": \"Dallmayr\",\n        \"description\": \"Espresso intenso\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"\",\n        \"grindingDegree\": \"7\",\n        \"percentArabica\": 100,\n        \"percentRobusta\": 0,\n        \"cuppingTime\": new Date(\"2019-05-29 14:32:33\"),\n        \"cremaRating\": 5,\n        \"tasteRating\": 4,\n        \"comment\": \"erdig\",\n        \"origin\": \"\",\n        \"roastLevel\": \"dark\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"18.99\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\"\n      },\n      {\n        \"id\": 16,\n        \"roaster\": \"DieRÃ¶ster - Kaffee vom See\",\n        \"description\": \"Uganda Indonesien\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"\",\n        \"grindingDegree\": \"21\",\n        \"percentArabica\": 100,\n        \"percentRobusta\": 0,\n        \"cuppingTime\": new Date(\"2023-06-08 08:45:36\"),\n        \"cremaRating\": 1,\n        \"tasteRating\": 1,\n        \"comment\": \"\",\n        \"origin\": \"UG,ID\",\n        \"roastLevel\": \"medium\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"33.30\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\"\n      },\n      {\n        \"id\": 25,\n        \"roaster\": \"Eduscho\",\n        \"description\": \"Espresso Intenso\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"\",\n        \"grindingDegree\": \"8\",\n        \"percentArabica\": 100,\n        \"percentRobusta\": 0,\n        \"cuppingTime\": new Date(\"2025-06-04 14:18:08\"),\n        \"cremaRating\": 1,\n        \"tasteRating\": 2,\n        \"comment\": \"erdig ist nicht meins\",\n        \"origin\": \"\",\n        \"roastLevel\": \"dark\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"16.99\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"18g dose stretched to 30 seconds - Americano style + extra fine sieve for more crema\"\n      },\n      {\n        \"id\": 1,\n        \"roaster\": \"Happy Coffee\",\n        \"description\": \"Sidamo Espresso\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"7\",\n        \"grindingDegree\": \"7\",\n        \"percentArabica\": 100,\n        \"percentRobusta\": 0,\n        \"cuppingTime\": new Date(\"2019-03-21 14:47:03\"),\n        \"cremaRating\": 5,\n        \"tasteRating\": 4,\n        \"comment\": \"Als Espresso sehr gut und stark.\",\n        \"origin\": \"ET\",\n        \"roastLevel\": \"medium-dark\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"24.90\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\"\n      },\n      {\n        \"id\": 7,\n        \"roaster\": \"Hrovat\",\n        \"description\": \"BÃ¼robohne\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"3\",\n        \"grindingDegree\": \"3\",\n        \"percentArabica\": 100,\n        \"percentRobusta\": 0,\n        \"cuppingTime\": new Date(\"2019-11-25 14:57:16\"),\n        \"cremaRating\": 3,\n        \"tasteRating\": 3,\n        \"comment\": \"etwas sÃ¤uerlich\",\n        \"origin\": \"AT\",\n        \"roastLevel\": \"medium\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"28.00\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\"\n      },\n      {\n        \"id\": 10,\n        \"roaster\": \"Hrovat\",\n        \"description\": \"Hallstattbohne\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"3\",\n        \"grindingDegree\": \"7\",\n        \"percentArabica\": 100,\n        \"percentRobusta\": 0,\n        \"cuppingTime\": new Date(\"2020-12-15 08:38:09\"),\n        \"cremaRating\": 3,\n        \"tasteRating\": 3,\n        \"comment\": \"ist mir zu bitter\",\n        \"origin\": \"AT\",\n        \"roastLevel\": \"medium-dark\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"28.00\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\"\n      },\n      {\n        \"id\": 6,\n        \"roaster\": \"Hrovat\",\n        \"description\": \"Kaiserbohne\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"3\",\n        \"grindingDegree\": \"3\",\n        \"percentArabica\": 100,\n        \"percentRobusta\": 0,\n        \"cuppingTime\": new Date(\"2019-11-19 14:00:10\"),\n        \"cremaRating\": 3,\n        \"tasteRating\": 3,\n        \"comment\": \"\",\n        \"origin\": \"AT\",\n        \"roastLevel\": \"medium\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"32.00\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\"\n      },\n      {\n        \"id\": 22,\n        \"roaster\": \"Tchibo\",\n        \"description\": \"Barista Espresso\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"\",\n        \"grindingDegree\": \"19\",\n        \"percentArabica\": 100,\n        \"percentRobusta\": 0,\n        \"cuppingTime\": new Date(\"2024-05-01 10:25:19\"),\n        \"cremaRating\": 2.5,\n        \"tasteRating\": 2.5,\n        \"tasteNotes\": \"nutty, golden crema, Brazilian highlands\",\n        \"url\": \"https://www.tchibo.de/products/280387747392/barista-espresso\",\n        \"comment\": \"Sehr wenig SÃ¤ure, 100% Fairtrade, drum roasted\",\n        \"origin\": \"BR\",\n        \"roastLevel\": \"medium\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"19.99\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\",\n        \"recommendedMethod\": \"espresso\"\n      },\n      {\n        \"id\": 23,\n        \"roaster\": \"Tchibo\",\n        \"description\": \"Barista Espresso Dark\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"\",\n        \"grindingDegree\": \"10\",\n        \"percentArabica\": 70,\n        \"percentRobusta\": 30,\n        \"cuppingTime\": new Date(\"2024-06-22 11:33:01\"),\n        \"cremaRating\": 3,\n        \"tasteRating\": 3,\n        \"tasteNotes\": \"roasted nuts, velvety dark crema, intense\",\n        \"url\": \"https://www.tchibo.de\",\n        \"comment\": \"India and Brazil blend, dark roast\",\n        \"origin\": \"IN,BR\",\n        \"roastLevel\": \"dark\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"espresso\",\n        \"price\": \"22.99\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\",\n        \"recommendedMethod\": \"espresso\"\n      },\n      {\n        \"id\": 24,\n        \"roaster\": \"Tchibo\",\n        \"description\": \"Cafe Crema Barista\",\n        \"favorite\": false,\n        \"grinded\": false,\n        \"grindingTime\": \"\",\n        \"grindingDegree\": \"13\",\n        \"percentArabica\": 100,\n        \"percentRobusta\": 0,\n        \"cuppingTime\": new Date(\"2024-06-22 11:33:37\"),\n        \"cremaRating\": 3,\n        \"tasteRating\": 3,\n        \"tasteNotes\": \"mild, red berries, velvety crema\",\n        \"url\": \"https://tchibo.us/pages/barista-coffees\",\n        \"comment\": \"gut zum verdÃ¼nnen, geschmacklich fad, gut vertrÃ¤glich, South American beans\",\n        \"origin\": \"SA\",\n        \"roastLevel\": \"light\",\n        \"brewingMethod\": \"espresso\",\n        \"recommendedMethod\": \"filter\",\n        \"price\": \"14.99\",\n        \"packageSize\": 1000,\n        \"currency\": \"EUR\",\n        \"preparationNotes\": \"Pure espresso\"\n      }\n    ];\n\n  // Data version for migration management\n  const DATA_VERSION = '2.1';\n  \n  // Load data from localStorage on mount\n  useEffect(() => {\n    const loadedData = localStorage.getItem('coffeeTrackerData');\n    const loadedVersion = localStorage.getItem('coffeeTrackerVersion');\n    \n    if (loadedData && loadedVersion === DATA_VERSION) {\n      try {\n        const parsedData = JSON.parse(loadedData);\n        // Convert date strings back to Date objects\n        const coffeesWithDates = parsedData.map(coffee => ({\n          ...coffee,\n          cuppingTime: new Date(coffee.cuppingTime)\n        }));\n        setCoffees(coffeesWithDates);\n        console.log('âœ… Loaded existing data from localStorage');\n      } catch (error) {\n        console.error('âŒ Error loading data from localStorage:', error);\n        // Fall back to default data if there's an error\n        setCoffees(defaultCoffees);\n        localStorage.setItem('coffeeTrackerVersion', DATA_VERSION);\n      }\n    } else {\n      // No saved data or version mismatch - use updated default data\n      console.log('ðŸ”„ Using fresh default data (version mismatch or first run)');\n      setCoffees(defaultCoffees);\n      localStorage.setItem('coffeeTrackerVersion', DATA_VERSION);\n    }\n\n    // Load dark mode preference\n    const savedDarkMode = localStorage.getItem('coffeeTrackerDarkMode');\n    if (savedDarkMode !== null) {\n      setDarkMode(JSON.parse(savedDarkMode));\n    }\n  }, []);\n\n  // Save data to localStorage whenever coffees change\n  useEffect(() => {\n    if (coffees.length > 0) {\n      try {\n        localStorage.setItem('coffeeTrackerData', JSON.stringify(coffees));\n        localStorage.setItem('coffeeTrackerVersion', DATA_VERSION);\n        localStorage.setItem('coffeeTrackerLastSaved', new Date().toISOString());\n        console.log('ðŸ’¾ Data saved to localStorage');\n      } catch (error) {\n        console.error('âŒ Error saving to localStorage:', error);\n        if (error.name === 'QuotaExceededError') {\n          alert('Storage quota exceeded! Consider exporting your data.');\n        }\n      }\n    }\n  }, [coffees]);\n\n  // Save dark mode preference\n  useEffect(() => {\n    localStorage.setItem('coffeeTrackerDarkMode', JSON.stringify(darkMode));\n  }, [darkMode]);\n\n  // Save collapsed roasters state\n  useEffect(() => {\n    localStorage.setItem('collapsedRoasters', JSON.stringify(collapsedRoasters));\n  }, [collapsedRoasters]);\n\n  // Toggle roaster collapse state\n  const toggleRoasterCollapse = (roasterName) => {\n    setCollapsedRoasters(prev => ({\n      ...prev,\n      [roasterName]: !prev[roasterName]\n    }));\n  };\n\n  // Country codes mapping with names\n  const countryFlags = {\n    'BR': { flag: 'ðŸ‡§ðŸ‡·', name: 'Brazil' },\n    'IN': { flag: 'ðŸ‡®ðŸ‡³', name: 'India' },\n    'ET': { flag: 'ðŸ‡ªðŸ‡¹', name: 'Ethiopia' },\n    'NI': { flag: 'ðŸ‡³ðŸ‡®', name: 'Nicaragua' },\n    'IT': { flag: 'ðŸ‡®ðŸ‡¹', name: 'Italy' },\n    'GT': { flag: 'ðŸ‡¬ðŸ‡¹', name: 'Guatemala' },\n    'UG': { flag: 'ðŸ‡ºðŸ‡¬', name: 'Uganda' },\n    'CR': { flag: 'ðŸ‡¨ðŸ‡·', name: 'Costa Rica' },\n    'CO': { flag: 'ðŸ‡¨ðŸ‡´', name: 'Colombia' },\n    'SV': { flag: 'ðŸ‡¸ðŸ‡»', name: 'El Salvador' },\n    'EC': { flag: 'ðŸ‡ªðŸ‡¨', name: 'Ecuador' },\n    'ID': { flag: 'ðŸ‡®ðŸ‡©', name: 'Indonesia' },\n    'AT': { flag: 'ðŸ‡¦ðŸ‡¹', name: 'Austria' },\n    'AS': { flag: 'ðŸŒ', name: 'Asia' },\n    'LA': { flag: 'ðŸŒŽ', name: 'Latin America' },\n    'SA': { flag: 'ðŸŒŽ', name: 'South America' }\n  };\n\n  // Roast level badge colors and text\n  const getRoastBadge = (level) => {\n    switch(level) {\n      case 'light':\n        return { bg: 'bg-yellow-100 dark:bg-yellow-900', text: 'text-yellow-800 dark:text-yellow-100', label: 'Light Roast' };\n      case 'medium':\n        return { bg: 'bg-amber-100 dark:bg-amber-900', text: 'text-amber-800 dark:text-amber-100', label: 'Medium Roast' };\n      case 'medium-dark':\n        return { bg: 'bg-orange-100 dark:bg-orange-900', text: 'text-orange-800 dark:text-orange-100', label: 'Medium-Dark' };\n      case 'dark':\n        return { bg: 'bg-stone-200 dark:bg-stone-800', text: 'text-stone-800 dark:text-stone-100', label: 'Dark Roast' };\n      default:\n        return { bg: 'bg-gray-100 dark:bg-gray-800', text: 'text-gray-800 dark:text-gray-100', label: 'Unknown' };\n    }\n  };\n\n  // Parse taste notes for radar chart\n  const parseTasteProfile = (tasteNotes) => {\n    const profile = {\n      chocolate: 0,\n      nutty: 0,\n      fruity: 0,\n      floral: 0,\n      earthy: 0,\n      spicy: 0,\n      sweet: 0,\n      acidic: 0\n    };\n\n    if (!tasteNotes) return profile;\n\n    const notes = tasteNotes.toLowerCase();\n    \n    // Score each attribute based on keywords - using incremental scoring\n    if (notes.includes('chocolate') || notes.includes('cocoa') || notes.includes('cacao')) profile.chocolate = 4;\n    if (notes.includes('dark chocolate')) profile.chocolate = 5;\n    \n    if (notes.includes('nutty') || notes.includes('nut')) profile.nutty = 3;\n    if (notes.includes('almond')) profile.nutty = Math.max(profile.nutty, 4);\n    if (notes.includes('hazelnut')) profile.nutty = Math.max(profile.nutty, 4);\n    if (notes.includes('walnut')) profile.nutty = Math.max(profile.nutty, 4);\n    if (notes.includes('pecan')) profile.nutty = Math.max(profile.nutty, 4);\n    \n    if (notes.includes('fruity') || notes.includes('fruit')) profile.fruity = 4;\n    if (notes.includes('berry') || notes.includes('berries')) profile.fruity = Math.max(profile.fruity, 4);\n    if (notes.includes('citrus')) profile.fruity = Math.max(profile.fruity, 4);\n    if (notes.includes('lemon')) profile.fruity = Math.max(profile.fruity, 3);\n    \n    if (notes.includes('floral') || notes.includes('flower') || notes.includes('jasmine')) profile.floral = 4;\n    \n    if (notes.includes('earthy')) profile.earthy = 4;\n    if (notes.includes('woody') || notes.includes('wood')) profile.earthy = Math.max(profile.earthy, 4);\n    \n    if (notes.includes('spicy') || notes.includes('spice')) profile.spicy = 4;\n    if (notes.includes('cinnamon')) profile.spicy = Math.max(profile.spicy, 3);\n    \n    if (notes.includes('sweet')) profile.sweet = 3;\n    if (notes.includes('caramel')) profile.sweet = Math.max(profile.sweet, 4);\n    if (notes.includes('honey')) profile.sweet = Math.max(profile.sweet, 4);\n    if (notes.includes('sugar')) profile.sweet = Math.max(profile.sweet, 3);\n    \n    if (notes.includes('acid') || notes.includes('bright') || notes.includes('lively')) profile.acidic = 4;\n    if (notes.includes('low acidity') || notes.includes('no acidity')) profile.acidic = 1;\n\n    return profile;\n  };\n\n  // Cost calculation functions\n  const calculateCostPerCup = (coffee) => {\n    if (!coffee.price || !coffee.packageSize) return null;\n    \n    const pricePerGram = parseFloat(coffee.price) / coffee.packageSize;\n    // Typical espresso shot uses 18-20g, let's use 18g as default\n    const gramsPerCup = coffee.brewingMethod === 'filter' ? 15 : 18;\n    const costPerCup = pricePerGram * gramsPerCup;\n    \n    return {\n      costPerCup: costPerCup.toFixed(3),\n      pricePerKg: (parseFloat(coffee.price) / coffee.packageSize * 1000).toFixed(2),\n      currency: coffee.currency || 'EUR'\n    };\n  };\n\n  const calculateValueScore = (coffee) => {\n    const cost = calculateCostPerCup(coffee);\n    if (!cost || coffee.tasteRating === 0) return null;\n    \n    // Value score = taste rating / cost per cup (higher is better)\n    const valueScore = coffee.tasteRating / parseFloat(cost.costPerCup);\n    return valueScore.toFixed(1);\n  };\n\n  // Fixed Analytics calculations\n  const getAnalyticsData = () => {\n    // Favorite roasters - improved calculation\n    const roasterCounts = coffees.reduce((acc, coffee) => {\n      const roaster = coffee.roaster.split(' - ')[0].trim();\n      acc[roaster] = (acc[roaster] || 0) + 1;\n      return acc;\n    }, {});\n\n    const roasterData = Object.entries(roasterCounts)\n      .map(([name, count]) => ({ name, count }))\n      .sort((a, b) => b.count - a.count)\n      .slice(0, 6); // Show top 6 roasters\n\n    // Arabica/Robusta preference - improved calculation\n    const totalCoffees = coffees.length;\n    const avgArabica = totalCoffees > 0 ? coffees.reduce((sum, c) => sum + c.percentArabica, 0) / totalCoffees : 50;\n    const avgRobusta = 100 - avgArabica;\n    \n    const blendData = [\n      { name: 'Arabica', value: Math.round(avgArabica), fill: '#8B4513' },\n      { name: 'Robusta', value: Math.round(avgRobusta), fill: '#D2691E' }\n    ];\n\n    // Rating trends over time - improved calculation with proper sorting\n    const ratingTrends = coffees\n      .sort((a, b) => new Date(a.cuppingTime) - new Date(b.cuppingTime))\n      .map((coffee, index) => ({\n        date: new Date(coffee.cuppingTime).toLocaleDateString('en-US', { \n          month: 'short', \n          year: '2-digit' \n        }),\n        rating: coffee.tasteRating,\n        crema: coffee.cremaRating,\n        name: coffee.roaster.split(' - ')[0],\n        index: index + 1\n      }));\n\n    // Roast level distribution\n    const roastLevelCounts = coffees.reduce((acc, coffee) => {\n      const level = coffee.roastLevel || 'unknown';\n      acc[level] = (acc[level] || 0) + 1;\n      return acc;\n    }, {});\n\n    const roastLevelData = Object.entries(roastLevelCounts)\n      .map(([level, count]) => ({ \n        level: level.charAt(0).toUpperCase() + level.slice(1), \n        count,\n        fill: level === 'light' ? '#D2B48C' : \n              level === 'medium' ? '#8B4513' : \n              level === 'medium-dark' ? '#654321' : \n              level === 'dark' ? '#3C1810' : '#A0A0A0'\n      }));\n\n    // Origin country analysis\n    const originCounts = coffees.reduce((acc, coffee) => {\n      if (coffee.origin) {\n        const countries = coffee.origin.split(',').map(c => c.trim());\n        countries.forEach(country => {\n          if (countryFlags[country]) {\n            acc[country] = (acc[country] || 0) + 1;\n          }\n        });\n      }\n      return acc;\n    }, {});\n\n    const originData = Object.entries(originCounts)\n      .map(([code, count]) => ({ \n        country: countryFlags[code]?.name || code,\n        code,\n        count,\n        flag: countryFlags[code]?.flag || 'ðŸŒ'\n      }))\n      .sort((a, b) => b.count - a.count)\n      .slice(0, 8);\n\n    // Grind settings by brand - NEW CALCULATION\n    const grindByBrand = coffees\n      .filter(c => c.grindingDegree && !isNaN(parseInt(c.grindingDegree)))\n      .reduce((acc, coffee) => {\n        const brand = coffee.roaster.split(' - ')[0].trim();\n        const grind = parseInt(coffee.grindingDegree);\n        \n        if (!acc[brand]) {\n          acc[brand] = { total: 0, count: 0, grinds: [] };\n        }\n        acc[brand].total += grind;\n        acc[brand].count += 1;\n        acc[brand].grinds.push(grind);\n        return acc;\n      }, {});\n\n    const grindByBrandData = Object.entries(grindByBrand)\n      .map(([brand, data]) => ({\n        brand,\n        avgGrind: Math.round(data.total / data.count * 10) / 10,\n        count: data.count,\n        minGrind: Math.min(...data.grinds),\n        maxGrind: Math.max(...data.grinds)\n      }))\n      .sort((a, b) => a.avgGrind - b.avgGrind);\n\n    // Price analysis\n    const coffeesWithPrice = coffees.filter(c => c.price && !isNaN(parseFloat(c.price)));\n    const priceAnalysis = coffeesWithPrice.map(coffee => {\n      const cost = calculateCostPerCup(coffee);\n      return {\n        name: coffee.roaster.split(' - ')[0],\n        coffee: coffee.description,\n        costPerCup: parseFloat(cost.costPerCup),\n        pricePerKg: parseFloat(cost.pricePerKg),\n        tasteRating: coffee.tasteRating,\n        valueScore: parseFloat(calculateValueScore(coffee)) || 0\n      };\n    }).sort((a, b) => a.costPerCup - b.costPerCup);\n\n    const avgCostPerCup = priceAnalysis.length > 0 \n      ? (priceAnalysis.reduce((sum, c) => sum + c.costPerCup, 0) / priceAnalysis.length).toFixed(3)\n      : null;\n\n    return { roasterData, blendData, ratingTrends, roastLevelData, originData, grindByBrandData, priceAnalysis, avgCostPerCup };\n  };\n\n  const [formData, setFormData] = useState({\n    roaster: '',\n    description: '',\n    favorite: false,\n    grinded: false,\n    grindingTime: '',\n    grindingDegree: '',\n    percentArabica: 100,\n    percentRobusta: 0,\n    cremaRating: 0,\n    tasteRating: 0,\n    tasteNotes: '',\n    url: '',\n    comment: '',\n    origin: '',\n    roastLevel: 'medium',\n    brewingMethod: 'espresso',\n    recommendedMethod: 'espresso',\n    price: '',\n    packageSize: 1000,\n    currency: 'EUR',\n    preparationNotes: '',\n    coffeeGroup: ''\n  });\n\n  const resetForm = () => {\n    setFormData({\n      roaster: '',\n      description: '',\n      favorite: false,\n      grinded: false,\n      grindingTime: '',\n      grindingDegree: '',\n      percentArabica: 100,\n      percentRobusta: 0,\n      cremaRating: 0,\n      tasteRating: 0,\n      tasteNotes: '',\n      url: '',\n      comment: '',\n      origin: '',\n      roastLevel: 'medium',\n      brewingMethod: 'espresso',\n      recommendedMethod: 'espresso',\n      price: '',\n      packageSize: 1000,\n      currency: 'EUR',\n      preparationNotes: '',\n      coffeeGroup: ''\n    });\n  };\n\n  const handleSubmit = () => {\n    const newCoffee = {\n      ...formData,\n      id: editingCoffee ? editingCoffee.id : Date.now(),\n      cuppingTime: editingCoffee ? editingCoffee.cuppingTime : new Date(),\n      percentArabica: parseInt(formData.percentArabica),\n      percentRobusta: parseInt(formData.percentRobusta),\n      grindingTime: formData.grindingTime || '',\n      grindingDegree: formData.grindingDegree || '',\n      cremaRating: parseInt(formData.cremaRating),\n      tasteRating: parseInt(formData.tasteRating),\n      tasteNotes: formData.tasteNotes || '',\n      url: formData.url || ''\n    };\n\n    if (editingCoffee) {\n      setCoffees(coffees.map(coffee => \n        coffee.id === editingCoffee.id ? newCoffee : coffee\n      ));\n      setEditingCoffee(null);\n    } else {\n      setCoffees([...coffees, newCoffee]);\n    }\n\n    resetForm();\n    setShowAddForm(false);\n  };\n\n  const handleEdit = (coffee) => {\n    setFormData({\n      roaster: coffee.roaster,\n      description: coffee.description,\n      favorite: coffee.favorite,\n      grinded: coffee.grinded,\n      grindingTime: coffee.grindingTime || '',\n      grindingDegree: coffee.grindingDegree || '',\n      percentArabica: coffee.percentArabica,\n      percentRobusta: coffee.percentRobusta,\n      cremaRating: coffee.cremaRating,\n      tasteRating: coffee.tasteRating,\n      tasteNotes: coffee.tasteNotes || '',\n      url: coffee.url || '',\n      comment: coffee.comment || '',\n      origin: coffee.origin || '',\n      roastLevel: coffee.roastLevel || 'medium',\n      brewingMethod: coffee.brewingMethod || 'espresso',\n      recommendedMethod: coffee.recommendedMethod || 'espresso',\n      price: coffee.price || '',\n      packageSize: coffee.packageSize || 1000,\n      currency: coffee.currency || 'EUR',\n      preparationNotes: coffee.preparationNotes || '',\n      coffeeGroup: coffee.coffeeGroup || ''\n    });\n    setEditingCoffee(coffee);\n    setShowAddForm(true);\n  };\n\n  const handleDelete = (id) => {\n    setCoffees(coffees.filter(coffee => coffee.id !== id));\n  };\n\n  // Copy coffee for different preparation methods\n  const handleCopy = (coffee) => {\n    const newCoffee = {\n      ...coffee,\n      id: Date.now(),\n      cuppingTime: new Date(),\n      cremaRating: 0,\n      tasteRating: 0,\n      preparationNotes: '',\n      comment: '',\n      // Create or maintain group ID for related coffees\n      coffeeGroup: coffee.coffeeGroup || `${coffee.roaster}-${coffee.description}`.replace(/[^a-zA-Z0-9]/g, '-').toLowerCase()\n    };\n    \n    // Also update the original coffee with group ID if it doesn't have one\n    if (!coffee.coffeeGroup) {\n      const updatedCoffees = coffees.map(c => \n        c.id === coffee.id \n          ? { ...c, coffeeGroup: newCoffee.coffeeGroup }\n          : c\n      );\n      setCoffees([...updatedCoffees, newCoffee]);\n    } else {\n      setCoffees([...coffees, newCoffee]);\n    }\n    \n    // Pre-fill form with the new coffee for editing\n    setFormData({\n      roaster: newCoffee.roaster,\n      description: newCoffee.description,\n      favorite: newCoffee.favorite,\n      grinded: newCoffee.grinded,\n      grindingTime: newCoffee.grindingTime || '',\n      grindingDegree: newCoffee.grindingDegree || '',\n      percentArabica: newCoffee.percentArabica,\n      percentRobusta: newCoffee.percentRobusta,\n      cremaRating: newCoffee.cremaRating,\n      tasteRating: newCoffee.tasteRating,\n      tasteNotes: newCoffee.tasteNotes || '',\n      url: newCoffee.url || '',\n      comment: newCoffee.comment || '',\n      origin: newCoffee.origin || '',\n      roastLevel: newCoffee.roastLevel || 'medium',\n      brewingMethod: newCoffee.brewingMethod || 'espresso',\n      recommendedMethod: newCoffee.recommendedMethod || 'espresso',\n      price: newCoffee.price || '',\n      packageSize: newCoffee.packageSize || 1000,\n      currency: newCoffee.currency || 'EUR',\n      preparationNotes: newCoffee.preparationNotes || '',\n      coffeeGroup: newCoffee.coffeeGroup\n    });\n    setEditingCoffee(newCoffee);\n    setShowAddForm(true);\n  };\n\n  // Export data to JSON file\n  const handleExport = () => {\n    const dataToExport = {\n      version: '1.0',\n      exportDate: new Date().toISOString(),\n      coffees: coffees\n    };\n    \n    const jsonString = JSON.stringify(dataToExport, null, 2);\n    const blob = new Blob([jsonString], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    \n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `coffee-tracker-export-${new Date().toISOString().split('T')[0]}.json`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  };\n\n  // Export data to PDF\n  const handlePDFExport = () => {\n    const doc = new jsPDF();\n    const pageHeight = doc.internal.pageSize.height;\n    let yPosition = 20;\n    \n    // Title\n    doc.setFontSize(20);\n    doc.setFont(undefined, 'bold');\n    doc.text('Coffee Collection', 20, yPosition);\n    yPosition += 15;\n    \n    // Summary stats\n    doc.setFontSize(12);\n    doc.setFont(undefined, 'normal');\n    doc.text(`Total Coffees: ${coffees.length}`, 20, yPosition);\n    yPosition += 8;\n    doc.text(`Favorites: ${coffees.filter(c => c.favorite).length}`, 20, yPosition);\n    yPosition += 8;\n    const avgRating = coffees.length > 0 ? (coffees.reduce((sum, c) => sum + c.tasteRating, 0) / coffees.length).toFixed(1) : '0';\n    doc.text(`Average Rating: ${avgRating}/5`, 20, yPosition);\n    yPosition += 15;\n    \n    // Coffee list\n    doc.setFont(undefined, 'bold');\n    doc.text('Coffee Details:', 20, yPosition);\n    yPosition += 10;\n    doc.setFont(undefined, 'normal');\n    \n    const sortedCoffees = [...coffees].sort((a, b) => b.tasteRating - a.tasteRating);\n    \n    sortedCoffees.forEach((coffee, index) => {\n      // Check if we need a new page\n      if (yPosition > pageHeight - 40) {\n        doc.addPage();\n        yPosition = 20;\n      }\n      \n      // Coffee header\n      doc.setFont(undefined, 'bold');\n      doc.setFontSize(12);\n      doc.text(`${index + 1}. ${coffee.roaster}`, 20, yPosition);\n      yPosition += 6;\n      \n      doc.setFont(undefined, 'normal');\n      doc.setFontSize(10);\n      \n      // Description\n      doc.text(`Description: ${coffee.description}`, 25, yPosition);\n      yPosition += 5;\n      \n      // Ratings with stars\n      const stars = (rating) => 'â˜…'.repeat(rating) + 'â˜†'.repeat(5 - rating);\n      doc.text(`Taste: ${stars(coffee.tasteRating)} (${coffee.tasteRating}/5)`, 25, yPosition);\n      yPosition += 5;\n      doc.text(`Crema: ${stars(coffee.cremaRating)} (${coffee.cremaRating}/5)`, 25, yPosition);\n      yPosition += 5;\n      \n      // Blend\n      doc.text(`Blend: ${coffee.percentArabica}% Arabica, ${coffee.percentRobusta}% Robusta`, 25, yPosition);\n      yPosition += 5;\n      \n      // Roast level\n      if (coffee.roastLevel) {\n        doc.text(`Roast: ${coffee.roastLevel.charAt(0).toUpperCase() + coffee.roastLevel.slice(1)}`, 25, yPosition);\n        yPosition += 5;\n      }\n      \n      // Brewing methods\n      if (coffee.brewingMethod) {\n        const method = brewingMethods.find(m => m.id === coffee.brewingMethod);\n        doc.text(`Your Method: ${method ? method.name : coffee.brewingMethod}`, 25, yPosition);\n        yPosition += 5;\n      }\n      if (coffee.recommendedMethod && coffee.recommendedMethod !== coffee.brewingMethod) {\n        const recMethod = brewingMethods.find(m => m.id === coffee.recommendedMethod);\n        doc.text(`Recommended: ${recMethod ? recMethod.name : coffee.recommendedMethod}`, 25, yPosition);\n        yPosition += 5;\n      }\n      \n      // Grind settings\n      if (coffee.grindingDegree) {\n        doc.text(`Grind Level: ${coffee.grindingDegree}`, 25, yPosition);\n        yPosition += 5;\n      }\n      \n      // Origin\n      if (coffee.origin) {\n        const origins = coffee.origin.split(',').map(code => {\n          const country = countryFlags[code.trim()];\n          return country ? country.name : code.trim();\n        }).join(', ');\n        doc.text(`Origin: ${origins}`, 25, yPosition);\n        yPosition += 5;\n      }\n      \n      // Taste notes\n      if (coffee.tasteNotes) {\n        const maxWidth = 160;\n        const lines = doc.splitTextToSize(`Taste Notes: ${coffee.tasteNotes}`, maxWidth);\n        lines.forEach(line => {\n          doc.text(line, 25, yPosition);\n          yPosition += 5;\n        });\n      }\n      \n      // Preparation notes\n      if (coffee.preparationNotes) {\n        doc.text(`Preparation: ${coffee.preparationNotes}`, 25, yPosition);\n        yPosition += 5;\n      }\n      \n      // Comment\n      if (coffee.comment) {\n        const maxWidth = 160;\n        const lines = doc.splitTextToSize(`Notes: ${coffee.comment}`, maxWidth);\n        lines.forEach(line => {\n          doc.text(line, 25, yPosition);\n          yPosition += 5;\n        });\n      }\n      \n      // Date\n      doc.text(`Cupped: ${new Date(coffee.cuppingTime).toLocaleDateString()}`, 25, yPosition);\n      yPosition += 5;\n      \n      // Price information\n      if (coffee.price) {\n        doc.text(`Price: ${coffee.price} ${coffee.currency || 'EUR'} / ${coffee.packageSize || 1000}g`, 25, yPosition);\n        yPosition += 5;\n        \n        const cost = calculateCostPerCup(coffee);\n        if (cost) {\n          doc.text(`Cost per cup: ${cost.costPerCup} ${cost.currency}`, 25, yPosition);\n          yPosition += 5;\n          \n          const valueScore = calculateValueScore(coffee);\n          if (valueScore) {\n            doc.text(`Value score: ${valueScore} (taste/cost ratio)`, 25, yPosition);\n            yPosition += 5;\n          }\n        }\n      }\n      \n      // Favorite indicator\n      if (coffee.favorite) {\n        doc.text('â˜… FAVORITE', 25, yPosition);\n        yPosition += 5;\n      }\n      \n      yPosition += 5; // Space between coffees\n    });\n    \n    // Footer\n    const totalPages = doc.internal.getNumberOfPages();\n    for (let i = 1; i <= totalPages; i++) {\n      doc.setPage(i);\n      doc.setFontSize(8);\n      doc.text(`Generated by Coffee Tracker - Page ${i} of ${totalPages}`, 20, pageHeight - 10);\n      doc.text(new Date().toLocaleDateString(), doc.internal.pageSize.width - 50, pageHeight - 10);\n    }\n    \n    // Save the PDF\n    doc.save(`coffee-collection-${new Date().toISOString().split('T')[0]}.pdf`);\n  };\n  \n  // Clear localStorage and reset to default data (DANGEROUS)\n  const handleResetToDefaults = () => {\n    const storageInfo = getStorageInfo();\n    const confirmText = 'RESET ALL DATA';\n    \n    const userInput = prompt(\n      `âš ï¸ DANGER: This will PERMANENTLY DELETE all your coffee data!\n\n` +\n      `You will lose:\n` +\n      `â€¢ ${coffees.length} coffee entries\n` +\n      `â€¢ All your personal ratings and comments\n` +\n      `â€¢ All cupping dates and custom data\n` +\n      `â€¢ ${storageInfo ? storageInfo.sizeKB : '?'}KB of stored data\n\n` +\n      `This CANNOT be undone!\n\n` +\n      `If you really want to continue, type exactly: ${confirmText}`\n    );\n    \n    if (userInput === confirmText) {\n      // Double confirmation\n      if (window.confirm('âš ï¸ FINAL WARNING: Are you absolutely sure? This will delete everything!')) {\n        localStorage.removeItem('coffeeTrackerData');\n        localStorage.removeItem('coffeeTrackerVersion');\n        localStorage.removeItem('coffeeTrackerLastSaved');\n        setCoffees(defaultCoffees);\n        localStorage.setItem('coffeeTrackerVersion', DATA_VERSION);\n        alert('âœ… Data reset to defaults. All previous data has been deleted.');\n      }\n    } else if (userInput !== null) {\n      alert('âŒ Reset cancelled. Text did not match exactly.');\n    }\n  };\n\n  // Force refresh data (bypass version check)\n  const handleForceRefresh = () => {\n    if (window.confirm('This will update your data with any missing fields from the latest version. Existing data will be preserved. Continue?')) {\n      const migratedData = coffees.map(coffee => ({\n        ...coffee,\n        // Ensure all new fields exist\n        brewingMethod: coffee.brewingMethod || 'espresso',\n        recommendedMethod: coffee.recommendedMethod || 'espresso',\n        price: coffee.price || '',\n        packageSize: coffee.packageSize || 1000,\n        currency: coffee.currency || 'EUR',\n        preparationNotes: coffee.preparationNotes || (new Date(coffee.cuppingTime) < new Date('2024-12-01') ? 'Pure espresso' : ''),\n        coffeeGroup: coffee.coffeeGroup || ''\n      }));\n      setCoffees(migratedData);\n      localStorage.setItem('coffeeTrackerVersion', DATA_VERSION);\n      alert('âœ… Data migrated to latest version!');\n    }\n  };\n\n  // Check localStorage usage\n  const getStorageInfo = () => {\n    try {\n      const data = localStorage.getItem('coffeeTrackerData');\n      const version = localStorage.getItem('coffeeTrackerVersion');\n      const lastSaved = localStorage.getItem('coffeeTrackerLastSaved');\n      const sizeKB = data ? (new Blob([data]).size / 1024).toFixed(2) : '0';\n      \n      return {\n        version,\n        lastSaved: lastSaved ? new Date(lastSaved).toLocaleString() : 'Never',\n        sizeKB,\n        coffeeCount: coffees.length\n      };\n    } catch (error) {\n      return null;\n    }\n  };\n\n  // Import data from JSON file\n  const handleImport = (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      try {\n        const importedData = JSON.parse(e.target.result);\n        \n        // Validate the imported data\n        if (!importedData.coffees || !Array.isArray(importedData.coffees)) {\n          alert('Invalid file format. Please select a valid Coffee Tracker export file.');\n          return;\n        }\n\n        // Convert date strings back to Date objects\n        const importedCoffees = importedData.coffees.map(coffee => ({\n          ...coffee,\n          cuppingTime: new Date(coffee.cuppingTime),\n          // Ensure each coffee has a unique ID\n          id: coffee.id || Date.now() + Math.random()\n        }));\n\n        // Ask user if they want to replace or merge\n        const shouldReplace = window.confirm(\n          `Import ${importedCoffees.length} coffees?\\n\\n` +\n          'OK = Replace all current data\\n' +\n          'Cancel = Merge with existing data'\n        );\n\n        if (shouldReplace) {\n          setCoffees(importedCoffees);\n        } else {\n          // Merge: add imported coffees with new IDs to avoid conflicts\n          const maxId = Math.max(...coffees.map(c => c.id), 0);\n          const mergedCoffees = [\n            ...coffees,\n            ...importedCoffees.map((coffee, index) => ({\n              ...coffee,\n              id: maxId + index + 1\n            }))\n          ];\n          setCoffees(mergedCoffees);\n        }\n\n        alert(`Successfully imported ${importedCoffees.length} coffees!`);\n      } catch (error) {\n        console.error('Import error:', error);\n        alert('Error importing file. Please make sure it\\'s a valid Coffee Tracker export.');\n      }\n    };\n    \n    reader.readAsText(file);\n    // Reset file input\n    event.target.value = '';\n  };\n\n  const filteredCoffees = coffees\n    .filter(coffee => {\n      const matchesSearch = coffee.roaster.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                           coffee.description.toLowerCase().includes(searchTerm.toLowerCase());\n      const matchesFavorite = !filterFavorites || coffee.favorite;\n      return matchesSearch && matchesFavorite;\n    })\n    .sort((a, b) => {\n      switch (sortBy) {\n        case 'rating':\n          return b.tasteRating - a.tasteRating;\n        case 'roaster':\n          return a.roaster.localeCompare(b.roaster);\n        case 'priceLowHigh':\n          const costA = calculateCostPerCup(a);\n          const costB = calculateCostPerCup(b);\n          if (!costA) return 1;\n          if (!costB) return -1;\n          return parseFloat(costA.costPerCup) - parseFloat(costB.costPerCup);\n        case 'priceHighLow':\n          const costA2 = calculateCostPerCup(a);\n          const costB2 = calculateCostPerCup(b);\n          if (!costA2) return 1;\n          if (!costB2) return -1;\n          return parseFloat(costB2.costPerCup) - parseFloat(costA2.costPerCup);\n        case 'value':\n          const valueA = calculateValueScore(a);\n          const valueB = calculateValueScore(b);\n          if (!valueA) return 1;\n          if (!valueB) return -1;\n          return parseFloat(valueB) - parseFloat(valueA);\n        case 'date':\n        default:\n          return new Date(b.cuppingTime) - new Date(a.cuppingTime);\n      }\n    });\n\n  const StarRating = ({ rating, onRatingChange, readOnly = false, size = 'normal' }) => {\n    const sizeClass = size === 'small' ? 'w-4 h-4' : 'w-5 h-5';\n    return (\n      <div className=\"flex space-x-1\">\n        {[1, 2, 3, 4, 5].map((star) => (\n          <Star\n            key={star}\n            className={`${sizeClass} cursor-pointer transition-colors ${\n              star <= rating \n                ? 'text-yellow-400 fill-yellow-400' \n                : darkMode ? 'text-gray-600 hover:text-yellow-300' : 'text-gray-300 hover:text-yellow-300'\n            } ${readOnly ? 'cursor-default' : ''}`}\n            onClick={() => !readOnly && onRatingChange && onRatingChange(star)}\n          />\n        ))}\n      </div>\n    );\n  };\n\n  // Prepare radar data for selected coffee\n  const getRadarData = (coffee) => {\n    const profile = parseTasteProfile(coffee.tasteNotes);\n    return Object.entries(profile).map(([taste, value]) => ({\n      taste: taste.charAt(0).toUpperCase() + taste.slice(1),\n      value\n    }));\n  };\n\n  const analytics = getAnalyticsData();\n\n  // Custom tooltip component for better formatting\n  const CustomTooltip = ({ active, payload, label }) => {\n    if (active && payload && payload.length) {\n      return (\n        <div className={`${darkMode ? 'bg-gray-800 border-gray-600' : 'bg-white border-gray-200'} p-3 rounded-lg shadow-lg border`}>\n          <p className={`${darkMode ? 'text-white' : 'text-gray-900'} font-medium`}>{label}</p>\n          {payload.map((entry, index) => (\n            <p key={index} style={{ color: entry.color }}>\n              {`${entry.dataKey}: ${entry.value}`}\n            </p>\n          ))}\n        </div>\n      );\n    }\n    return null;\n  };\n\n  return (\n    <div className={`min-h-screen ${darkMode ? 'bg-gray-900' : 'bg-gradient-to-br from-amber-50 to-orange-100'} p-4 transition-colors`}>\n      <div className=\"max-w-6xl mx-auto\">\n        {/* Header */}\n        <div className={`${darkMode ? 'bg-gray-800 text-white' : 'bg-white'} rounded-2xl shadow-xl p-6 mb-6 transition-colors`}>\n          <div className=\"flex items-center justify-between flex-wrap gap-4 mb-4\">\n            <div className=\"flex items-center space-x-3\">\n              <Coffee className=\"w-8 h-8 text-amber-600\" />\n              <h1 className={`text-3xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>Coffee Tracker</h1>\n            </div>\n            <div className=\"flex items-center space-x-3\">\n              <button\n                onClick={() => setDarkMode(!darkMode)}\n                className={`p-2 rounded-lg ${darkMode ? 'bg-gray-700 text-yellow-400' : 'bg-gray-200 text-gray-700'} transition-colors`}\n              >\n                {darkMode ? <Sun className=\"w-5 h-5\" /> : <Moon className=\"w-5 h-5\" />}\n              </button>\n              <button\n                onClick={handleExport}\n                className={`p-2 rounded-lg ${darkMode ? 'bg-gray-700 text-gray-300 hover:bg-gray-600' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'} transition-colors`}\n                title=\"Export JSON data\"\n              >\n                <Download className=\"w-5 h-5\" />\n              </button>\n              <button\n                onClick={handlePDFExport}\n                className={`p-2 rounded-lg ${darkMode ? 'bg-gray-700 text-red-300 hover:bg-gray-600' : 'bg-gray-200 text-red-700 hover:bg-gray-300'} transition-colors`}\n                title=\"Export PDF catalog\"\n              >\n                <FileText className=\"w-5 h-5\" />\n              </button>\n              <button\n                onClick={() => fileInputRef.current?.click()}\n                className={`p-2 rounded-lg ${darkMode ? 'bg-gray-700 text-gray-300 hover:bg-gray-600' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'} transition-colors`}\n                title=\"Import data\"\n              >\n                <Upload className=\"w-5 h-5\" />\n              </button>\n              <button\n                onClick={handleForceRefresh}\n                className={`p-2 rounded-lg ${darkMode ? 'bg-gray-700 text-blue-300 hover:bg-gray-600' : 'bg-gray-200 text-blue-700 hover:bg-gray-300'} transition-colors`}\n                title=\"Update to latest version (safe)\"\n              >\n                <RefreshCw className=\"w-5 h-5\" />\n              </button>\n              {/* Dangerous reset button - separated and clearly marked */}\n              <div className=\"border-l border-gray-400 ml-2 pl-2\">\n                <button\n                  onClick={handleResetToDefaults}\n                  className={`p-2 rounded-lg ${darkMode ? 'bg-red-900 text-red-300 hover:bg-red-800' : 'bg-red-100 text-red-700 hover:bg-red-200'} transition-colors border ${darkMode ? 'border-red-700' : 'border-red-300'}`}\n                  title=\"âš ï¸ DANGER: Reset ALL data to defaults (EXPORT FIRST!)\"\n                >\n                  <RotateCcw className=\"w-5 h-5\" />\n                </button>\n              </div>\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                accept=\".json\"\n                onChange={handleImport}\n                className=\"hidden\"\n              />\n              <button\n                onClick={() => setShowAnalytics(!showAnalytics)}\n                className={`${darkMode ? 'bg-blue-600 hover:bg-blue-700' : 'bg-blue-500 hover:bg-blue-600'} text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors`}\n              >\n                <BarChart3 className=\"w-5 h-5\" />\n                <span className=\"hidden sm:inline\">Analytics</span>\n              </button>\n              <button\n                onClick={() => {\n                  resetForm();\n                  setEditingCoffee(null);\n                  setShowAddForm(true);\n                }}\n                className=\"bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors\"\n              >\n                <Plus className=\"w-5 h-5\" />\n                <span className=\"hidden sm:inline\">Add Coffee</span>\n              </button>\n            </div>\n          </div>\n\n          {/* Stats */}\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <div className={`${darkMode ? 'bg-gray-700' : 'bg-amber-50'} p-4 rounded-lg transition-colors`}>\n              <div className=\"text-2xl font-bold text-amber-600\">{coffees.length}</div>\n              <div className={darkMode ? 'text-gray-300' : 'text-gray-600'}>Total Coffees</div>\n            </div>\n            <div className={`${darkMode ? 'bg-gray-700' : 'bg-amber-50'} p-4 rounded-lg transition-colors`}>\n              <div className=\"text-2xl font-bold text-amber-600\">\n                {coffees.filter(c => c.favorite).length}\n              </div>\n              <div className={darkMode ? 'text-gray-300' : 'text-gray-600'}>Favorites</div>\n            </div>\n            <div className={`${darkMode ? 'bg-gray-700' : 'bg-amber-50'} p-4 rounded-lg transition-colors`}>\n              <div className=\"text-2xl font-bold text-amber-600\">\n                {coffees.length > 0 ? (coffees.reduce((sum, c) => sum + c.tasteRating, 0) / coffees.length).toFixed(1) : '0'}\n              </div>\n              <div className={darkMode ? 'text-gray-300' : 'text-gray-600'}>Avg Rating</div>\n            </div>\n            <div className={`${darkMode ? 'bg-gray-700' : 'bg-amber-50'} p-4 rounded-lg transition-colors`}>\n              <div className=\"text-2xl font-bold text-green-600\">\n                {analytics.avgCostPerCup ? `${analytics.avgCostPerCup} â‚¬` : 'N/A'}\n              </div>\n              <div className={darkMode ? 'text-gray-300' : 'text-gray-600'}>Avg Cost/Cup</div>\n            </div>\n          </div>\n          \n          {/* Storage Info */}\n          {(() => {\n            const storageInfo = getStorageInfo();\n            return storageInfo && (\n              <div className={`${darkMode ? 'bg-gray-700' : 'bg-blue-50'} p-3 rounded-lg mt-4 border-l-4 border-blue-500`}>\n                <div className=\"flex items-center justify-between flex-wrap gap-2 text-sm\">\n                  <div className={darkMode ? 'text-gray-300' : 'text-gray-700'}>\n                    ðŸ’¾ Data Version: <span className=\"font-mono\">{storageInfo.version}</span> | \n                    Size: <span className=\"font-mono\">{storageInfo.sizeKB}KB</span> | \n                    Last Saved: <span className=\"font-mono\">{storageInfo.lastSaved}</span>\n                  </div>\n                  <div className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                    {storageInfo.coffeeCount} coffees in storage\n                  </div>\n                </div>\n              </div>\n            );\n          })()}\n        </div>\n\n        {/* Analytics Dashboard */}\n        {showAnalytics && (\n          <div className={`${darkMode ? 'bg-gray-800 text-white' : 'bg-white'} rounded-2xl shadow-xl p-6 mb-6 transition-colors`}>\n            <h2 className=\"text-2xl font-bold mb-6\">Coffee Analytics & Insights</h2>\n            \n            {/* Value Score Explanation */}\n            <div className={`${darkMode ? 'bg-gray-700' : 'bg-amber-50'} p-4 rounded-lg mb-6 border-l-4 border-amber-500`}>\n              <h3 className=\"text-lg font-semibold mb-2 flex items-center\">\n                <span className=\"text-amber-600 mr-2\">ðŸ’¡</span>\n                Value Score Explained\n              </h3>\n              <p className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n                <strong>Value Score = Taste Rating Ã· Cost per Cup</strong>\n              </p>\n              <p className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                Higher scores mean better value for money. A 5-star coffee at â‚¬0.50/cup (Value: 10.0) offers better value than a 5-star coffee at â‚¬1.00/cup (Value: 5.0). \n                Scores above 5 are generally good value.\n              </p>\n            </div>\n            \n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              {/* Top Roasters */}\n              <div>\n                <h3 className=\"text-lg font-semibold mb-4\">Top Roasters</h3>\n                <ResponsiveContainer width=\"100%\" height={250}>\n                  <BarChart data={analytics.roasterData} margin={{ top: 20, right: 30, left: 20, bottom: 80 }}>\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke={darkMode ? '#374151' : '#e5e7eb'} />\n                    <XAxis \n                      dataKey=\"name\" \n                      stroke={darkMode ? '#9ca3af' : '#6b7280'}\n                      angle={-45}\n                      textAnchor=\"end\"\n                      height={80}\n                      interval={0}\n                      fontSize={12}\n                    />\n                    <YAxis stroke={darkMode ? '#9ca3af' : '#6b7280'} />\n                    <Tooltip content={<CustomTooltip />} />\n                    <Bar dataKey=\"count\" fill=\"#f59e0b\" radius={[4, 4, 0, 0]} />\n                  </BarChart>\n                </ResponsiveContainer>\n              </div>\n\n              {/* Blend Preference */}\n              <div>\n                <h3 className=\"text-lg font-semibold mb-4\">Average Blend Preference</h3>\n                <ResponsiveContainer width=\"100%\" height={250}>\n                  <PieChart margin={{ top: 20, right: 20, bottom: 20, left: 20 }}>\n                    <Pie\n                      data={analytics.blendData}\n                      cx=\"50%\"\n                      cy=\"50%\"\n                      labelLine={false}\n                      outerRadius={80}\n                      dataKey=\"value\"\n                    >\n                      {analytics.blendData.map((entry, index) => (\n                        <Cell key={`cell-${index}`} fill={entry.fill} />\n                      ))}\n                    </Pie>\n                    <Tooltip content={<CustomTooltip />} />\n                    <Legend \n                      verticalAlign=\"bottom\" \n                      height={36}\n                      formatter={(value, entry) => `${value}: ${entry.payload.value}%`}\n                    />\n                  </PieChart>\n                </ResponsiveContainer>\n              </div>\n\n              {/* Rating Trends */}\n              <div className=\"lg:col-span-2\">\n                <h3 className=\"text-lg font-semibold mb-4\">Rating Trends Over Time</h3>\n                <ResponsiveContainer width=\"100%\" height={250}>\n                  <LineChart data={analytics.ratingTrends} margin={{ top: 20, right: 30, left: 20, bottom: 60 }}>\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke={darkMode ? '#374151' : '#e5e7eb'} />\n                    <XAxis \n                      dataKey=\"date\" \n                      stroke={darkMode ? '#9ca3af' : '#6b7280'}\n                      angle={-45}\n                      textAnchor=\"end\"\n                      height={60}\n                      interval={Math.max(0, Math.floor(analytics.ratingTrends.length / 10))}\n                      fontSize={12}\n                    />\n                    <YAxis domain={[0, 5]} stroke={darkMode ? '#9ca3af' : '#6b7280'} />\n                    <Tooltip content={<CustomTooltip />} />\n                    <Line \n                      type=\"monotone\" \n                      dataKey=\"rating\" \n                      stroke=\"#f59e0b\" \n                      strokeWidth={2} \n                      dot={{ r: 4, fill: '#f59e0b' }}\n                      name=\"Taste Rating\"\n                    />\n                    <Line \n                      type=\"monotone\" \n                      dataKey=\"crema\" \n                      stroke=\"#8b4513\" \n                      strokeWidth={2} \n                      dot={{ r: 4, fill: '#8b4513' }}\n                      name=\"Crema Rating\"\n                    />\n                  </LineChart>\n                </ResponsiveContainer>\n              </div>\n\n              {/* Origin Countries */}\n              <div>\n                <h3 className=\"text-lg font-semibold mb-4\">Coffee Origins</h3>\n                <ResponsiveContainer width=\"100%\" height={250}>\n                  <BarChart data={analytics.originData} margin={{ top: 20, right: 30, left: 20, bottom: 80 }}>\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke={darkMode ? '#374151' : '#e5e7eb'} />\n                    <XAxis \n                      dataKey=\"code\" \n                      stroke={darkMode ? '#9ca3af' : '#6b7280'}\n                      angle={-45}\n                      textAnchor=\"end\"\n                      height={80}\n                      interval={0}\n                      fontSize={12}\n                    />\n                    <YAxis stroke={darkMode ? '#9ca3af' : '#6b7280'} />\n                    <Tooltip content={<CustomTooltip />} />\n                    <Bar dataKey=\"count\" fill=\"#10b981\" radius={[4, 4, 0, 0]} />\n                  </BarChart>\n                </ResponsiveContainer>\n              </div>\n\n              {/* Roast Levels */}\n              <div>\n                <h3 className=\"text-lg font-semibold mb-4\">Roast Level Distribution</h3>\n                <ResponsiveContainer width=\"100%\" height={250}>\n                  <PieChart>\n                    <Pie\n                      data={analytics.roastLevelData}\n                      cx=\"50%\"\n                      cy=\"50%\"\n                      labelLine={false}\n                      label={({ level, count }) => `${level}: ${count}`}\n                      outerRadius={80}\n                      dataKey=\"count\"\n                    >\n                      {analytics.roastLevelData.map((entry, index) => (\n                        <Cell key={`cell-${index}`} fill={entry.fill} />\n                      ))}\n                    </Pie>\n                    <Tooltip content={<CustomTooltip />} />\n                  </PieChart>\n                </ResponsiveContainer>\n              </div>\n\n              {/* Cost Analysis */}\n              {analytics.priceAnalysis && analytics.priceAnalysis.length > 0 && (\n                <div className=\"lg:col-span-2\">\n                  <h3 className=\"text-lg font-semibold mb-4\">Cost Analysis</h3>\n                  <div className=\"mb-4\">\n                    <p className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                      Average cost per cup: <span className=\"font-bold text-green-600\">{analytics.avgCostPerCup} EUR</span>\n                    </p>\n                  </div>\n                  <ResponsiveContainer width=\"100%\" height={300}>\n                    <BarChart data={analytics.priceAnalysis.slice(0, 10)} margin={{ top: 20, right: 30, left: 60, bottom: 80 }}>\n                      <CartesianGrid strokeDasharray=\"3 3\" stroke={darkMode ? '#374151' : '#e5e7eb'} />\n                      <XAxis \n                        dataKey=\"name\" \n                        stroke={darkMode ? '#9ca3af' : '#6b7280'} \n                        angle={-45} \n                        textAnchor=\"end\" \n                        height={80}\n                        interval={0}\n                        fontSize={12}\n                      />\n                      <YAxis \n                        stroke={darkMode ? '#9ca3af' : '#6b7280'} \n                        label={{ value: 'Cost per Cup (EUR)', angle: -90, position: 'insideLeft' }}\n                      />\n                      <Tooltip \n                        content={({ active, payload, label }) => {\n                          if (active && payload && payload.length) {\n                            const data = payload[0].payload;\n                            return (\n                              <div className={`${darkMode ? 'bg-gray-800 border-gray-600' : 'bg-white border-gray-200'} p-3 rounded-lg shadow-lg border`}>\n                                <p className={`${darkMode ? 'text-white' : 'text-gray-900'} font-medium`}>{label}</p>\n                                <p className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>{data.coffee}</p>\n                                <p style={{ color: payload[0].color }}>\n                                  Cost: {data.costPerCup.toFixed(3)} EUR/cup\n                                </p>\n                                <p className=\"text-sm text-gray-500\">\n                                  Taste: {data.tasteRating}/5 | Value: {data.valueScore}\n                                </p>\n                              </div>\n                            );\n                          }\n                          return null;\n                        }}\n                      />\n                      <Bar dataKey=\"costPerCup\" fill=\"#10b981\" radius={[4, 4, 0, 0]} />\n                    </BarChart>\n                  </ResponsiveContainer>\n                </div>\n              )}\n\n              {/* Grind Settings by Brand - FIXED */}\n              <div className=\"lg:col-span-2\">\n                <h3 className=\"text-lg font-semibold mb-4\">Grind Settings by Brand</h3>\n                {analytics.grindByBrandData && analytics.grindByBrandData.length > 0 ? (\n                  <ResponsiveContainer width=\"100%\" height={300}>\n                    <BarChart data={analytics.grindByBrandData} margin={{ top: 20, right: 30, left: 60, bottom: 80 }}>\n                      <CartesianGrid strokeDasharray=\"3 3\" stroke={darkMode ? '#374151' : '#e5e7eb'} />\n                      <XAxis \n                        dataKey=\"brand\" \n                        stroke={darkMode ? '#9ca3af' : '#6b7280'} \n                        angle={-45} \n                        textAnchor=\"end\" \n                        height={80}\n                        interval={0}\n                        fontSize={12}\n                      />\n                      <YAxis \n                        stroke={darkMode ? '#9ca3af' : '#6b7280'} \n                        label={{ value: 'Grind Level', angle: -90, position: 'insideLeft' }}\n                      />\n                      <Tooltip \n                        content={({ active, payload, label }) => {\n                          if (active && payload && payload.length) {\n                            return (\n                              <div className={`${darkMode ? 'bg-gray-800 border-gray-600' : 'bg-white border-gray-200'} p-3 rounded-lg shadow-lg border`}>\n                                <p className={`${darkMode ? 'text-white' : 'text-gray-900'} font-medium`}>{label}</p>\n                                <p style={{ color: payload[0].color }}>\n                                  Average Grind: {payload[0].value}\n                                </p>\n                                <p className=\"text-sm text-gray-500\">\n                                  {payload[0].payload.count} coffee{payload[0].payload.count !== 1 ? 's' : ''}\n                                </p>\n                              </div>\n                            );\n                          }\n                          return null;\n                        }}\n                      />\n                      <Bar dataKey=\"avgGrind\" fill=\"#8b4513\" radius={[4, 4, 0, 0]} />\n                    </BarChart>\n                  </ResponsiveContainer>\n                ) : (\n                  <div className=\"text-center py-8 text-gray-500\">\n                    No grind data available\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* Flavor Profile Comparison */}\n            {selectedCoffeeForRadar && (\n              <div className=\"mt-8\">\n                <h3 className=\"text-lg font-semibold mb-4\">\n                  Flavor Profile: {selectedCoffeeForRadar.roaster} - {selectedCoffeeForRadar.description}\n                </h3>\n                <ResponsiveContainer width=\"100%\" height={600}>\n                  <RadarChart data={getRadarData(selectedCoffeeForRadar)} margin={{ top: 50, right: 50, bottom: 50, left: 50 }}>\n                    <PolarGrid stroke={darkMode ? '#374151' : '#e5e7eb'} />\n                    <PolarAngleAxis \n                      dataKey=\"taste\" \n                      stroke={darkMode ? '#9ca3af' : '#6b7280'} \n                      fontSize={18}\n                      tick={{ fill: darkMode ? '#e5e7eb' : '#374151' }}\n                      className=\"font-medium\"\n                    />\n                    <PolarRadiusAxis \n                      domain={[0, 5]} \n                      stroke={darkMode ? '#9ca3af' : '#6b7280'} \n                      fontSize={16}\n                      tick={{ fill: darkMode ? '#9ca3af' : '#6b7280' }}\n                    />\n                    <Radar name=\"Flavor Profile\" dataKey=\"value\" stroke=\"#f59e0b\" fill=\"#f59e0b\" fillOpacity={0.3} strokeWidth={3} />\n                    <Tooltip content={<CustomTooltip />} />\n                  </RadarChart>\n                </ResponsiveContainer>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Search and Filter */}\n        <div className={`${darkMode ? 'bg-gray-800 text-white' : 'bg-white'} rounded-2xl shadow-xl p-6 mb-6 transition-colors`}>\n          <div className=\"flex flex-col md:flex-row gap-4\">\n            <div className=\"flex-1 relative\">\n              <Search className=\"w-5 h-5 absolute left-3 top-3 text-gray-400\" />\n              <input\n                type=\"text\"\n                placeholder=\"Search by roaster or description...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className={`w-full pl-10 pr-4 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n              />\n            </div>\n            <div className=\"flex space-x-4\">\n              <button\n                onClick={() => setFilterFavorites(!filterFavorites)}\n                className={`px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors ${\n                  filterFavorites \n                    ? 'bg-amber-600 text-white' \n                    : darkMode ? 'bg-gray-700 text-gray-300 hover:bg-gray-600' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\n                }`}\n              >\n                <Star className=\"w-4 h-4\" />\n                <span>Favorites</span>\n              </button>\n              <select\n                value={sortBy}\n                onChange={(e) => setSortBy(e.target.value)}\n                className={`px-4 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n              >\n                <option value=\"date\">Sort by Date</option>\n                <option value=\"rating\">Sort by Rating</option>\n                <option value=\"roaster\">Sort by Roaster</option>\n                <option value=\"value\">Sort by Value (Best First)</option>\n                <option value=\"priceLowHigh\">Sort by Price (Low to High)</option>\n                <option value=\"priceHighLow\">Sort by Price (High to Low)</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {/* Add/Edit Form */}\n        {showAddForm && (\n          <div className={`${darkMode ? 'bg-gray-800 text-white' : 'bg-white'} rounded-2xl shadow-xl p-6 mb-6 transition-colors`}>\n            <h2 className=\"text-2xl font-bold mb-6\">\n              {editingCoffee ? 'Edit Coffee' : 'Add New Coffee'}\n            </h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Roaster</label>\n                <input\n                  type=\"text\"\n                  required\n                  value={formData.roaster}\n                  onChange={(e) => setFormData({...formData, roaster: e.target.value})}\n                  className={`w-full px-3 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n                />\n              </div>\n\n              <div>\n                <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Description</label>\n                <input\n                  type=\"text\"\n                  required\n                  value={formData.description}\n                  onChange={(e) => setFormData({...formData, description: e.target.value})}\n                  className={`w-full px-3 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n                />\n              </div>\n\n              <div className=\"flex items-center space-x-6\">\n                <label className=\"flex items-center space-x-2\">\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.favorite}\n                    onChange={(e) => setFormData({...formData, favorite: e.target.checked})}\n                    className=\"rounded text-amber-600 focus:ring-amber-500\"\n                  />\n                  <span className={`text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Favorite</span>\n                </label>\n                <label className=\"flex items-center space-x-2\">\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.grinded}\n                    onChange={(e) => setFormData({...formData, grinded: e.target.checked})}\n                    className=\"rounded text-amber-600 focus:ring-amber-500\"\n                  />\n                  <span className={`text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Pre-grinded</span>\n                </label>\n              </div>\n\n              <div>\n                <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Roast Level</label>\n                <select\n                  value={formData.roastLevel}\n                  onChange={(e) => setFormData({...formData, roastLevel: e.target.value})}\n                  className={`w-full px-3 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n                >\n                  <option value=\"light\">Light</option>\n                  <option value=\"medium\">Medium</option>\n                  <option value=\"medium-dark\">Medium-Dark</option>\n                  <option value=\"dark\">Dark</option>\n                </select>\n              </div>\n\n              <div>\n                <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Your Brewing Method</label>\n                <select\n                  value={formData.brewingMethod}\n                  onChange={(e) => setFormData({...formData, brewingMethod: e.target.value})}\n                  className={`w-full px-3 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n                >\n                  {brewingMethods.map(method => (\n                    <option key={method.id} value={method.id}>\n                      {method.icon} {method.name}\n                    </option>\n                  ))}\n                </select>\n                <p className={`text-xs mt-1 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                  Your preferred brewing method\n                </p>\n              </div>\n\n              <div>\n                <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Roaster's Recommended Method</label>\n                <select\n                  value={formData.recommendedMethod}\n                  onChange={(e) => setFormData({...formData, recommendedMethod: e.target.value})}\n                  className={`w-full px-3 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n                >\n                  {brewingMethods.map(method => (\n                    <option key={method.id} value={method.id}>\n                      {method.icon} {method.name}\n                    </option>\n                  ))}\n                </select>\n                <p className={`text-xs mt-1 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                  What the roaster suggests (check packaging/website)\n                </p>\n              </div>\n\n              <div>\n                <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Origin Countries</label>\n                <input\n                  type=\"text\"\n                  placeholder=\"e.g. BR, CO, ET (Brazil, Colombia, Ethiopia)\"\n                  value={formData.origin}\n                  onChange={(e) => setFormData({...formData, origin: e.target.value})}\n                  className={`w-full px-3 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n                />\n                <p className={`text-xs mt-1 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                  Common codes: BR (Brazil), CO (Colombia), ET (Ethiopia), GT (Guatemala), CR (Costa Rica)\n                </p>\n              </div>\n\n              <div>\n                <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Grinder Level</label>\n                <input\n                  type=\"text\"\n                  placeholder=\"e.g. 12, 15, 10\"\n                  value={formData.grindingDegree}\n                  onChange={(e) => setFormData({...formData, grindingDegree: e.target.value})}\n                  className={`w-full px-3 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Arabica %</label>\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    max=\"100\"\n                    value={formData.percentArabica}\n                    onChange={(e) => {\n                      const arabica = parseInt(e.target.value) || 0;\n                      setFormData({\n                        ...formData, \n                        percentArabica: arabica,\n                        percentRobusta: Math.max(0, 100 - arabica)\n                      });\n                    }}\n                    className={`w-full px-3 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n                  />\n                </div>\n                <div>\n                  <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Robusta %</label>\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    max=\"100\"\n                    value={formData.percentRobusta}\n                    onChange={(e) => {\n                      const robusta = parseInt(e.target.value) || 0;\n                      setFormData({\n                        ...formData, \n                        percentRobusta: robusta,\n                        percentArabica: Math.max(0, 100 - robusta)\n                      });\n                    }}\n                    className={`w-full px-3 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Crema Rating</label>\n                <StarRating \n                  rating={formData.cremaRating} \n                  onRatingChange={(rating) => setFormData({...formData, cremaRating: rating})}\n                />\n              </div>\n\n              <div>\n                <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Taste Notes</label>\n                <input\n                  type=\"text\"\n                  placeholder=\"e.g. chocolate, nutty, fruity, earthy, sweet\"\n                  value={formData.tasteNotes}\n                  onChange={(e) => setFormData({...formData, tasteNotes: e.target.value})}\n                  className={`w-full px-3 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n                />\n              </div>\n\n              <div>\n                <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Product URL</label>\n                <input\n                  type=\"url\"\n                  placeholder=\"https://...\"\n                  value={formData.url}\n                  onChange={(e) => setFormData({...formData, url: e.target.value})}\n                  className={`w-full px-3 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n                />\n              </div>\n\n              <div>\n                <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Taste Rating</label>\n                <StarRating \n                  rating={formData.tasteRating} \n                  onRatingChange={(rating) => setFormData({...formData, tasteRating: rating})}\n                />\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div>\n                  <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Price</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    placeholder=\"e.g. 12.50\"\n                    value={formData.price}\n                    onChange={(e) => setFormData({...formData, price: e.target.value})}\n                    className={`w-full px-3 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n                  />\n                </div>\n                <div>\n                  <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Package Size (g)</label>\n                  <input\n                    type=\"number\"\n                    placeholder=\"1000\"\n                    value={formData.packageSize}\n                    onChange={(e) => setFormData({...formData, packageSize: parseInt(e.target.value) || 1000})}\n                    className={`w-full px-3 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n                  />\n                </div>\n                <div>\n                  <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Currency</label>\n                  <select\n                    value={formData.currency}\n                    onChange={(e) => setFormData({...formData, currency: e.target.value})}\n                    className={`w-full px-3 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n                  >\n                    <option value=\"EUR\">EUR â‚¬</option>\n                    <option value=\"USD\">USD $</option>\n                    <option value=\"GBP\">GBP Â£</option>\n                    <option value=\"CHF\">CHF â‚£</option>\n                  </select>\n                </div>\n              </div>\n\n              <div>\n                <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Preparation Notes</label>\n                <input\n                  type=\"text\"\n                  value={formData.preparationNotes}\n                  onChange={(e) => setFormData({...formData, preparationNotes: e.target.value})}\n                  placeholder=\"e.g. 'Pure espresso', 'Americano style + extra sieve', 'Double shot'\"\n                  className={`w-full px-3 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n                />\n                <p className={`text-xs mt-1 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                  How you prepared this coffee when rating it\n                </p>\n              </div>\n              \n              <div>\n                <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Coffee Group (Optional)</label>\n                <input\n                  type=\"text\"\n                  value={formData.coffeeGroup}\n                  onChange={(e) => setFormData({...formData, coffeeGroup: e.target.value})}\n                  placeholder=\"Leave empty for auto-grouping\"\n                  className={`w-full px-3 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n                />\n                <p className={`text-xs mt-1 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                  Groups related coffees together (auto-generated when copying)\n                </p>\n              </div>\n\n              <div className=\"md:col-span-2\">\n                <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>Comment</label>\n                <textarea\n                  value={formData.comment}\n                  onChange={(e) => setFormData({...formData, comment: e.target.value})}\n                  rows=\"3\"\n                  placeholder=\"Additional notes, brewing tips, personal thoughts...\"\n                  className={`w-full px-3 py-2 border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'border-gray-300'} rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-colors`}\n                />\n              </div>\n\n              <div className=\"md:col-span-2 flex space-x-4\">\n                <button\n                  onClick={handleSubmit}\n                  className=\"bg-amber-600 hover:bg-amber-700 text-white px-6 py-2 rounded-lg transition-colors\"\n                >\n                  {editingCoffee ? 'Update Coffee' : 'Add Coffee'}\n                </button>\n                <button\n                  onClick={() => {\n                    setShowAddForm(false);\n                    setEditingCoffee(null);\n                    resetForm();\n                  }}\n                  className={`${darkMode ? 'bg-gray-700 hover:bg-gray-600 text-white' : 'bg-gray-300 hover:bg-gray-400 text-gray-700'} px-6 py-2 rounded-lg transition-colors`}\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Coffee List */}\n        <div className=\"space-y-8\">\n          {(() => {\n            // First group by roaster, then by coffeeGroup for variations\n            const roasterGroups = filteredCoffees.reduce((roasters, coffee) => {\n              const roaster = coffee.roaster.split(' - ')[0] || coffee.roaster; // Get main roaster name\n              if (!roasters[roaster]) roasters[roaster] = [];\n              roasters[roaster].push(coffee);\n              return roasters;\n            }, {});\n            \n            // Sort roasters: favorites first, then alphabetically\n            const sortedRoasters = Object.entries(roasterGroups).sort(([roasterA, coffeesA], [roasterB, coffeesB]) => {\n              const avgRatingA = coffeesA.reduce((sum, c) => sum + c.tasteRating, 0) / coffeesA.length;\n              const avgRatingB = coffeesB.reduce((sum, c) => sum + c.tasteRating, 0) / coffeesB.length;\n              const favCountA = coffeesA.filter(c => c.favorite).length;\n              const favCountB = coffeesB.filter(c => c.favorite).length;\n              \n              // Sort by: 1) favorites count, 2) average rating, 3) alphabetically\n              if (favCountA !== favCountB) return favCountB - favCountA;\n              if (Math.abs(avgRatingA - avgRatingB) > 0.1) return avgRatingB - avgRatingA;\n              return roasterA.localeCompare(roasterB);\n            });\n            \n            return sortedRoasters.map(([roasterName, roasterCoffees]) => {\n              // Group coffees within this roaster by coffeeGroup for variations\n              const groupedCoffees = roasterCoffees.reduce((groups, coffee) => {\n                const group = coffee.coffeeGroup || `individual-${coffee.id}`;\n                if (!groups[group]) groups[group] = [];\n                groups[group].push(coffee);\n                return groups;\n              }, {});\n              \n              const avgRating = roasterCoffees.reduce((sum, c) => sum + c.tasteRating, 0) / roasterCoffees.length;\n              const favoriteCount = roasterCoffees.filter(c => c.favorite).length;\n              const isCollapsed = collapsedRoasters[roasterName];\n              \n              return (\n                <div key={roasterName} className=\"space-y-4\">\n                  {/* Roaster Header */}\n                  <div \n                    className={`${darkMode ? 'bg-gray-700 hover:bg-gray-600' : 'bg-gradient-to-r from-amber-100 to-orange-100 hover:from-amber-200 hover:to-orange-200'} rounded-xl p-4 border-l-4 border-amber-500 cursor-pointer transition-colors`}\n                    onClick={() => toggleRoasterCollapse(roasterName)}\n                  >\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"flex items-center space-x-2\">\n                          {isCollapsed ? (\n                            <ChevronDown className={`w-5 h-5 ${darkMode ? 'text-gray-300' : 'text-gray-600'}`} />\n                          ) : (\n                            <ChevronUp className={`w-5 h-5 ${darkMode ? 'text-gray-300' : 'text-gray-600'}`} />\n                          )}\n                          <h2 className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                            â˜• {roasterName}\n                          </h2>\n                        </div>\n                        <span className={`text-sm px-3 py-1 rounded-full font-medium ${darkMode ? 'bg-gray-600 text-gray-200' : 'bg-white text-gray-700'}`}>\n                          {roasterCoffees.length} coffee{roasterCoffees.length !== 1 ? 's' : ''}\n                        </span>\n                        {favoriteCount > 0 && (\n                          <span className={`text-sm px-3 py-1 rounded-full font-medium ${darkMode ? 'bg-yellow-900 text-yellow-100' : 'bg-yellow-100 text-yellow-800'}`}>\n                            â­ {favoriteCount} favorite{favoriteCount !== 1 ? 's' : ''}\n                          </span>\n                        )}\n                      </div>\n                      <div className=\"flex items-center space-x-2\">\n                        <span className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                          Avg Rating:\n                        </span>\n                        <div className=\"flex items-center\">\n                          <StarRating rating={Math.round(avgRating)} readOnly size=\"small\" />\n                          <span className={`ml-1 text-sm font-semibold ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>\n                            {avgRating.toFixed(1)}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {/* Coffees within this roaster - conditionally rendered */}\n                  {!isCollapsed && (\n                    <div className=\"grid gap-6 ml-4\">\n                      {Object.entries(groupedCoffees).map(([groupId, coffees]) => {\n              const isGrouped = coffees.length > 1 && !groupId.startsWith('individual-');\n              const mainCoffee = coffees[0]; // Use first coffee for shared information\n              \n              if (isGrouped) {\n                // Grouped coffee display: main card + variation sub-cards\n                return (\n                  <div key={groupId} className=\"space-y-4\">\n                    {/* Main coffee card with shared information */}\n                    <div className={`${darkMode ? 'bg-gray-800 text-white' : 'bg-white'} rounded-2xl shadow-xl p-6 border-l-4 border-blue-500`}>\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center space-x-3 mb-3\">\n                            <h3 className=\"text-xl font-bold\">{mainCoffee.roaster}</h3>\n                            <span className={`text-xs px-2 py-1 rounded-full font-medium ${darkMode ? 'bg-blue-900 text-blue-100' : 'bg-blue-100 text-blue-800'}`}>\n                              ðŸ“Š {coffees.length} preparations\n                            </span>\n                            {mainCoffee.roastLevel && (\n                              <span className={`text-xs px-2 py-1 rounded-full font-medium ${getRoastBadge(mainCoffee.roastLevel).bg} ${getRoastBadge(mainCoffee.roastLevel).text}`}>\n                                {getRoastBadge(mainCoffee.roastLevel).label}\n                              </span>\n                            )}\n                          </div>\n                          \n                          <p className={`${darkMode ? 'text-gray-300' : 'text-gray-600'} mb-4`}>{mainCoffee.description}</p>\n                          \n                          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\">\n                            <div className=\"flex items-center space-x-2\">\n                              <Percent className=\"w-4 h-4 text-gray-500\" />\n                              <span className=\"text-sm\">\n                                {mainCoffee.percentArabica}% Arabica / {mainCoffee.percentRobusta}% Robusta\n                              </span>\n                            </div>\n                            \n                            {mainCoffee.grindingDegree && (\n                              <div className=\"flex items-center space-x-2\">\n                                <span className=\"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded\">\n                                  Grinder Level: {mainCoffee.grindingDegree}\n                                </span>\n                              </div>\n                            )}\n                            \n                            {mainCoffee.price && (\n                              <div className=\"flex items-center space-x-2\">\n                                <span className=\"text-xs bg-green-100 text-green-800 px-2 py-1 rounded\">\n                                  {mainCoffee.price} {mainCoffee.currency || 'EUR'} / {mainCoffee.packageSize || 1000}g\n                                </span>\n                              </div>\n                            )}\n                          </div>\n\n                          {mainCoffee.origin && (\n                            <div className=\"mb-4\">\n                              <div className=\"flex flex-wrap items-center gap-1\">\n                                {mainCoffee.origin.split(',').map(code => {\n                                  const trimmedCode = code.trim();\n                                  const country = countryFlags[trimmedCode];\n                                  const isRegion = ['AS', 'LA', 'SA'].includes(trimmedCode);\n                                  \n                                  return (\n                                    <span \n                                      key={code} \n                                      className=\"inline-flex items-center\"\n                                      title={country ? country.name : trimmedCode}\n                                    >\n                                      {country && !isRegion ? (\n                                        <>\n                                          <span className=\"text-xl\">{country.flag}</span>\n                                          <span className=\"text-xs ml-1\">{trimmedCode}</span>\n                                        </>\n                                      ) : (\n                                        <span className=\"text-xs bg-green-100 text-green-800 px-2 py-1 rounded\">\n                                          {country ? country.name : trimmedCode}\n                                        </span>\n                                      )}\n                                    </span>\n                                  );\n                                })}\n                              </div>\n                            </div>\n                          )}\n                          \n                          {mainCoffee.price && (\n                            <div className=\"mb-4\">\n                              {(() => {\n                                const cost = calculateCostPerCup(mainCoffee);\n                                return cost && (\n                                  <div className=\"flex items-center space-x-4\">\n                                    <div className=\"text-sm\">\n                                      <span className={`${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Cost per cup: </span>\n                                      <span className=\"font-bold text-green-600\">\n                                        {cost.costPerCup} {cost.currency}\n                                      </span>\n                                    </div>\n                                    <div className=\"text-sm\">\n                                      <span className={`${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Price per kg: </span>\n                                      <span className=\"font-bold\">\n                                        {cost.pricePerKg} {cost.currency}\n                                      </span>\n                                    </div>\n                                  </div>\n                                );\n                              })()}\n                            </div>\n                          )}\n                          \n                          {(mainCoffee.comment || mainCoffee.url) && (\n                            <div className=\"space-y-2\">\n                              {mainCoffee.url && (\n                                <div className=\"flex items-center space-x-2\">\n                                  <ExternalLink className=\"w-4 h-4 text-blue-600\" />\n                                  <a \n                                    href={mainCoffee.url} \n                                    target=\"_blank\" \n                                    rel=\"noopener noreferrer\"\n                                    className=\"text-sm text-blue-600 hover:text-blue-800 underline\"\n                                  >\n                                    View Product Online\n                                  </a>\n                                </div>\n                              )}\n                              {mainCoffee.comment && (\n                                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} italic`}>{mainCoffee.comment}</p>\n                              )}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* Variation sub-cards */}\n                    <div className=\"grid md:grid-cols-2 gap-4 ml-6\">\n                      {coffees.map((coffee) => (\n                        <div key={coffee.id} className={`${darkMode ? 'bg-gray-700 text-white' : 'bg-gray-50'} rounded-xl shadow-md p-4 border-l-4 ${coffee.preparationNotes?.includes('Pure espresso') ? 'border-amber-500' : 'border-green-500'}`}>\n                          <div className=\"flex items-start justify-between\">\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center space-x-2 mb-3\">\n                                <h4 className=\"text-lg font-semibold\">Preparation #{coffees.indexOf(coffee) + 1}</h4>\n                                {coffee.favorite && <Star className=\"w-4 h-4 text-yellow-400 fill-yellow-400\" />}\n                              </div>\n                              \n                              {coffee.preparationNotes && (\n                                <div className=\"mb-3\">\n                                  <span className={`text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Method: </span>\n                                  <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} italic`}>{coffee.preparationNotes}</span>\n                                </div>\n                              )}\n                              \n                              <div className=\"grid grid-cols-2 gap-4 mb-3\">\n                                <div>\n                                  <span className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-500'} block mb-1`}>Crema</span>\n                                  <StarRating rating={coffee.cremaRating} readOnly />\n                                </div>\n                                <div>\n                                  <span className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-500'} block mb-1`}>Taste</span>\n                                  <StarRating rating={coffee.tasteRating} readOnly />\n                                </div>\n                              </div>\n                              \n                              {(() => {\n                                const valueScore = calculateValueScore(coffee);\n                                return valueScore && (\n                                  <div className=\"mb-3\">\n                                    <span className={`text-xs px-2 py-1 rounded ${darkMode ? 'bg-amber-900 text-amber-100' : 'bg-amber-100 text-amber-800'}`} title=\"Value Score: Taste Rating Ã· Cost per Cup. Higher = Better Value!\">\n                                      Value: {valueScore}\n                                    </span>\n                                  </div>\n                                );\n                              })()}\n                              \n                              <div className=\"text-xs text-gray-500\">\n                                Tasted: {new Date(coffee.cuppingTime).toLocaleDateString()}\n                              </div>\n                            </div>\n                            \n                            <div className=\"flex flex-col space-y-1 ml-2\">\n                              <button\n                                onClick={() => handleEdit(coffee)}\n                                className={`p-1.5 ${darkMode ? 'text-gray-400 hover:text-amber-400 hover:bg-gray-600' : 'text-gray-600 hover:text-amber-600 hover:bg-amber-50'} rounded transition-colors`}\n                                title=\"Edit preparation\"\n                              >\n                                <Edit3 className=\"w-3 h-3\" />\n                              </button>\n                              <button\n                                onClick={() => handleCopy(coffee)}\n                                className={`p-1.5 ${darkMode ? 'text-gray-400 hover:text-blue-400 hover:bg-gray-600' : 'text-gray-600 hover:text-blue-600 hover:bg-blue-50'} rounded transition-colors`}\n                                title=\"Copy for new preparation\"\n                              >\n                                <Copy className=\"w-3 h-3\" />\n                              </button>\n                              <button\n                                onClick={() => handleDelete(coffee.id)}\n                                className={`p-1.5 ${darkMode ? 'text-gray-400 hover:text-red-400 hover:bg-gray-600' : 'text-gray-600 hover:text-red-600 hover:bg-red-50'} rounded transition-colors`}\n                                title=\"Delete preparation\"\n                              >\n                                <Trash2 className=\"w-3 h-3\" />\n                              </button>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                );\n              } else {\n                // Individual coffee display (unchanged)\n                const coffee = mainCoffee;\n                return (\n            <div key={coffee.id} className={`${darkMode ? 'bg-gray-800 text-white' : 'bg-white'} rounded-2xl shadow-xl p-6 hover:shadow-2xl transition-all`}>\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center space-x-3 mb-3\">\n                    <h3 className=\"text-xl font-bold\">{coffee.roaster}</h3>\n                    {coffee.favorite && (\n                      <Star className=\"w-5 h-5 text-yellow-400 fill-yellow-400\" />\n                    )}\n                    {coffee.roastLevel && (\n                      <span className={`text-xs px-2 py-1 rounded-full font-medium ${getRoastBadge(coffee.roastLevel).bg} ${getRoastBadge(coffee.roastLevel).text}`}>\n                        {getRoastBadge(coffee.roastLevel).label}\n                      </span>\n                    )}\n                    {coffee.brewingMethod && (\n                      <span className={`text-xs px-2 py-1 rounded-full font-medium ${darkMode ? 'bg-blue-900 text-blue-100' : 'bg-blue-100 text-blue-800'}`} title=\"Your preferred method\">\n                        ðŸ‘¤ {brewingMethods.find(m => m.id === coffee.brewingMethod)?.icon} {brewingMethods.find(m => m.id === coffee.brewingMethod)?.name || coffee.brewingMethod}\n                      </span>\n                    )}\n                    {coffee.recommendedMethod && coffee.recommendedMethod !== coffee.brewingMethod && (\n                      <span className={`text-xs px-2 py-1 rounded-full font-medium ${darkMode ? 'bg-green-900 text-green-100' : 'bg-green-100 text-green-800'}`} title=\"Roaster's recommendation\">\n                        ðŸª {brewingMethods.find(m => m.id === coffee.recommendedMethod)?.icon} {brewingMethods.find(m => m.id === coffee.recommendedMethod)?.name || coffee.recommendedMethod}\n                      </span>\n                    )}\n                  </div>\n                  \n                  <p className={`${darkMode ? 'text-gray-300' : 'text-gray-600'} mb-4`}>{coffee.description}</p>\n                  \n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\">\n                    <div className=\"flex items-center space-x-2\">\n                      <Percent className=\"w-4 h-4 text-gray-500\" />\n                      <span className=\"text-sm\">\n                        {coffee.percentArabica}% Arabica / {coffee.percentRobusta}% Robusta\n                      </span>\n                    </div>\n                    \n                    {coffee.grindingDegree && (\n                      <div className=\"flex items-center space-x-2\">\n                        <span className=\"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded\">\n                          Grinder Level: {coffee.grindingDegree}\n                        </span>\n                      </div>\n                    )}\n                    \n                    <div className=\"flex items-center space-x-2\">\n                      <Calendar className=\"w-4 h-4 text-gray-500\" />\n                      <span className=\"text-sm\">\n                        {new Date(coffee.cuppingTime).toLocaleDateString()}\n                      </span>\n                    </div>\n                    \n                    {coffee.price && (\n                      <div className=\"flex items-center space-x-2\">\n                        <span className=\"text-xs bg-green-100 text-green-800 px-2 py-1 rounded\">\n                          {coffee.price} {coffee.currency || 'EUR'} / {coffee.packageSize || 1000}g\n                        </span>\n                      </div>\n                    )}\n                  </div>\n\n                  {coffee.origin && (\n                    <div className=\"mb-4\">\n                      <div className=\"flex flex-wrap items-center gap-1\">\n                        {coffee.origin.split(',').map(code => {\n                          const trimmedCode = code.trim();\n                          const country = countryFlags[trimmedCode];\n                          const isRegion = ['AS', 'LA', 'SA'].includes(trimmedCode);\n                          \n                          return (\n                            <span \n                              key={code} \n                              className=\"inline-flex items-center\"\n                              title={country ? country.name : trimmedCode}\n                            >\n                              {country && !isRegion ? (\n                                <>\n                                  <span className=\"text-xl\">{country.flag}</span>\n                                  <span className=\"text-xs ml-1\">{trimmedCode}</span>\n                                </>\n                              ) : (\n                                <span className=\"text-xs bg-green-100 text-green-800 px-2 py-1 rounded\">\n                                  {country ? country.name : trimmedCode}\n                                </span>\n                              )}\n                            </span>\n                          );\n                        })}\n                      </div>\n                    </div>\n                  )}\n                  \n                  {coffee.tasteNotes && (\n                    <div className=\"mb-3\">\n                      <span className={`text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Taste: </span>\n                      <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>{coffee.tasteNotes}</span>\n                      <button\n                        onClick={() => setSelectedCoffeeForRadar(coffee)}\n                        className=\"ml-2 text-amber-600 hover:text-amber-700 text-sm\"\n                        title=\"Show flavor profile\"\n                      >\n                        <BarChart3 className=\"w-4 h-4 inline\" />\n                      </button>\n                    </div>\n                  )}\n                  \n                  {coffee.preparationNotes && (\n                    <div className=\"mb-3\">\n                      <span className={`text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Preparation: </span>\n                      <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} italic`}>{coffee.preparationNotes}</span>\n                    </div>\n                  )}\n                  \n                  <div className=\"flex items-center space-x-6 mb-4\">\n                    <div>\n                      <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-500'} block`}>Crema</span>\n                      <StarRating rating={coffee.cremaRating} readOnly />\n                    </div>\n                    <div>\n                      <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-500'} block`}>Taste</span>\n                      <StarRating rating={coffee.tasteRating} readOnly />\n                    </div>\n                    {(() => {\n                      const cost = calculateCostPerCup(coffee);\n                      const valueScore = calculateValueScore(coffee);\n                      return cost && (\n                        <div>\n                          <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-500'} block`}>Cost/Cup</span>\n                          <div className=\"flex items-center space-x-2\">\n                            <span className=\"text-lg font-bold text-green-600\">\n                              {cost.costPerCup} {cost.currency}\n                            </span>\n                            {valueScore && (\n                              <span className={`text-xs px-2 py-1 rounded ${darkMode ? 'bg-amber-900 text-amber-100' : 'bg-amber-100 text-amber-800'}`} title=\"Value Score: Taste Rating Ã· Cost per Cup. Higher = Better Value!\">\n                                Value: {valueScore}\n                              </span>\n                            )}\n                          </div>\n                        </div>\n                      );\n                    })()}\n                  </div>\n                  \n                  {(coffee.comment || coffee.url) && (\n                    <div className=\"space-y-2\">\n                      {coffee.url && (\n                        <div className=\"flex items-center space-x-2\">\n                          <ExternalLink className=\"w-4 h-4 text-blue-600\" />\n                          <a \n                            href={coffee.url} \n                            target=\"_blank\" \n                            rel=\"noopener noreferrer\"\n                            className=\"text-sm text-blue-600 hover:text-blue-800 underline\"\n                          >\n                            View Product Online\n                          </a>\n                        </div>\n                      )}\n                      {coffee.comment && (\n                        <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} italic`}>{coffee.comment}</p>\n                      )}\n                    </div>\n                  )}\n                </div>\n                \n                <div className=\"flex flex-col space-y-2 ml-4\">\n                  <button\n                    onClick={() => handleEdit(coffee)}\n                    className={`p-2 ${darkMode ? 'text-gray-400 hover:text-amber-400 hover:bg-gray-700' : 'text-gray-600 hover:text-amber-600 hover:bg-amber-50'} rounded-lg transition-colors`}\n                    title=\"Edit coffee\"\n                  >\n                    <Edit3 className=\"w-4 h-4\" />\n                  </button>\n                  <button\n                    onClick={() => handleCopy(coffee)}\n                    className={`p-2 ${darkMode ? 'text-gray-400 hover:text-blue-400 hover:bg-gray-700' : 'text-gray-600 hover:text-blue-600 hover:bg-blue-50'} rounded-lg transition-colors`}\n                    title=\"Copy for different preparation\"\n                  >\n                    <Copy className=\"w-4 h-4\" />\n                  </button>\n                  <button\n                    onClick={() => handleDelete(coffee.id)}\n                    className={`p-2 ${darkMode ? 'text-gray-400 hover:text-red-400 hover:bg-gray-700' : 'text-gray-600 hover:text-red-600 hover:bg-red-50'} rounded-lg transition-colors`}\n                    title=\"Delete coffee\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n                );\n              }\n                      })}\n                    </div>\n                  )}\n                </div>\n              );\n            });\n          })()}\n        </div>\n\n        {filteredCoffees.length === 0 && (\n          <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-2xl shadow-xl p-12 text-center`}>\n            <Coffee className={`w-16 h-16 ${darkMode ? 'text-gray-600' : 'text-gray-300'} mx-auto mb-4`} />\n            <h3 className={`text-xl font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-600'} mb-2`}>No coffees found</h3>\n            <p className={darkMode ? 'text-gray-400' : 'text-gray-500'}>\n              {searchTerm || filterFavorites ? 'Try adjusting your search or filters' : 'Add your first coffee to get started!'}\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CoffeeTracker;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}